var on=Object.defineProperty;var Za=Object.getOwnPropertySymbols;var rn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable;var Ja=(s,e,l)=>e in s?on(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l,zl=(s,e)=>{for(var l in e||(e={}))rn.call(e,l)&&Ja(s,l,e[l]);if(Za)for(var l of Za(e))fn.call(e,l)&&Ja(s,l,e[l]);return s};import{R as un,I as fl,S as pe,i as Ee,s as we,M as $t,e as v,c as b,a as y,d as u,b as h,f as Y,g as w,F as _,O as ea,P as la,Q as ta,q as j,o as q,K as Se,t as K,L as ze,h as D,j as le,G as H,T as Je,U as ce,H as wl,l as _e,V as Xa,W as cn,w as te,x as ae,y as se,B as ne,X as Ya,k as M,m as L,Y as Qa,n as ve,p as be,Z as dt,_ as xa,r as aa,v as hn,$ as mt,a0 as sa,a1 as _n,a2 as dn,a3 as mn,a4 as gn,N as kn,a5 as gt,a6 as kt,a7 as vn,a8 as bn,a9 as yn,aa as $a,ab as es,ac as ls,ad as pn}from"../chunks/vendor-6dc8375e.js";import{l as lt,c as ul,d as ts,v as na,a as as,t as En,b as wn,s as Sn,e as de,m as zn}from"../chunks/config-e450a226.js";import{a as Cn}from"../chunks/paths-c0fc83a9.js";import{r as ia}from"../chunks/singletons-a6a7384f.js";const ss="https://ftb-api-ext.ons.sensiblecode.io/graphql",An=`
fragment tableDimensions on Table {
  dimensions {
    categories {
      code
    }
  }
}
`.replace(/\s+/g," "),Kn=btoa("ahmad.barclay:elope.puck.hails.explore"),ns=new Headers({"Content-Type":"application/json",Authorization:"Basic "+Kn});async function is(s,e=[],l=window.fetch){let t=e[0]?[...e].sort((k,p)=>k.topic.localeCompare(p.topic)):[...e],a=[],n=[],i=[],o=[];t[0]&&t.forEach(k=>{k.var&&(a.push(k.var),n.push(`{variable: "${k.var}", codes: ["${k.code}"]}`),k.topic!="age group"&&(i.push(k.var),o.push(`{variable: "${k.var}", codes: ["${k.code}"]}`)))}),a=a[0]?'"'+a.join('","')+'",':"",n=n[0]?"["+n.join(",")+"]":"[]",i=i[0]?'"'+i.join('","')+'",':"",o=o[0]?"["+o.join(",")+"]":"[]";let r=[];s.forEach(k=>{let p=[];k.tables.forEach(A=>{p.push(`
      ${A.key}: table(
        variables: [${A.key=="age"?i:a}"${A.code}"]
        filters: ${A.key=="age"?o:n}
      )
      {
        values
      }
      `)});let N=`
    ${k.key}: dataset(name:"${k.code}") {
      ${p.join(`
`)}
    }
    `;r.push(N)});const f=`
  query {
    ${r.join(`
`)}
  }
  `.replace(/\s+/g," "),m={body:JSON.stringify({query:f}),headers:ns,method:"POST",mode:"cors"};let g=await(await l(ss,m)).json(),c=t.filter(k=>k.topic=="age group");if(c[0]&&g.data.residents.age.values){let k=[...g.data.residents.age.values],p=c[0].code.split("-");p.forEach((N,A)=>p[A]=+N),k.forEach((N,A)=>k[A]=A>=p[0]&&A<=p[1]?N:0),g.data.residents.age.values=k}return g}async function os(s=[],e=window.fetch){let l=s[0]?[...s].sort((m,d)=>m.topic.localeCompare(d.topic)):[...s],t=[],a=[];l[0]&&l.forEach(m=>{m.var&&(t.push(m.var),a.push(`{variable: "${m.var}", codes: ["${m.code}"]}`))});let n=t[0]?'"'+t.join('","')+'",':"";a=a[0]?"["+a.join(",")+"]":"[]";const i=`
  query {
    dataset(name:"Usual-Residents") {
      table(
        variables: ["LA"${n}]
        filters: ${a}
      )
      {
        ...tableDimensions
        values
      }
    }
  }
  `.replace(/\s+/g," "),o={body:JSON.stringify({query:i+An}),headers:ns,method:"POST",mode:"cors"};return await(await e(ss,o)).json()}function Dn(s,e,l){for(let t=1;t<e.length;t++)if(s<=e[t])return l[t-1]}function rs(s){return s>0?"increase":s<0?"decrease":"nochange"}function fs(s,e="",l=0){return s!=0?Math.abs(s).toFixed(l)+e:e=="pp"?"n/c":"no change"}async function Tn(s,e,l=window.fetch){let a=await(await l(s)).json();return await un(a,e)}function Oe(s){return s.charAt(0).toUpperCase()+s.slice(1)}function oa(s){return s?s.reduce((e,l)=>e+l):0}function Ye(s){return(s?s.slice(0,-1).reduce((l,t)=>l+t):0)==0}const Pn=()=>{const s=fl("__svelte__");return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:s.navigating.subscribe}},session:s.session}},Nn={subscribe(s){return Pn().page.subscribe(s)}},us=Vn,In=Bn;async function Vn(s,e){return ia.goto(s,e,[])}function Bn(s){ia&&ia.after_navigate(s)}function Mn(s){let e,l,t,a;const n=s[3].default,i=$t(n,s,s[2],null);return{c(){e=v("section"),l=v("div"),i&&i.c(),this.h()},l(o){e=b(o,"SECTION",{style:!0});var r=y(e);l=b(r,"DIV",{class:!0});var f=y(l);i&&i.l(f),f.forEach(u),r.forEach(u),this.h()},h(){h(l,"class",t="col-"+(s[1]=="wide"?"wide":s[1]=="narrow"?"narrow":"medium")),Y(e,"color",s[0].text),Y(e,"background-color",s[0].background)},m(o,r){w(o,e,r),_(e,l),i&&i.m(l,null),a=!0},p(o,[r]){i&&i.p&&(!a||r&4)&&ea(i,n,o,o[2],a?ta(n,o[2],r,null):la(o[2]),null),(!a||r&2&&t!==(t="col-"+(o[1]=="wide"?"wide":o[1]=="narrow"?"narrow":"medium")))&&h(l,"class",t),(!a||r&1)&&Y(e,"color",o[0].text),(!a||r&1)&&Y(e,"background-color",o[0].background)},i(o){a||(j(i,o),a=!0)},o(o){q(i,o),a=!1},d(o){o&&u(e),i&&i.d(o)}}}function Ln(s,e,l){let{$$slots:t={},$$scope:a}=e,{theme:n=fl("theme")}=e,{column:i="medium"}=e;return s.$$set=o=>{"theme"in o&&l(0,n=o.theme),"column"in o&&l(1,i=o.column),"$$scope"in o&&l(2,a=o.$$scope)},[n,i,a,t]}class jn extends pe{constructor(e){super();Ee(this,e,Ln,Mn,we,{theme:0,column:1})}}function cs(s,e,l){const t=s.slice();return t[25]=e[l],t[27]=l,t}function hs(s){let e,l,t,a;return{c(){e=Se("rect"),this.h()},l(n){e=ze(n,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),y(e).forEach(u),this.h()},h(){h(e,"class","group-rect"),h(e,"data-id",s[27]),h(e,"x",l=s[12].bandwidth?s[8](s[25]):s[8](s[25])[0]),h(e,"y",t=s[14](s[13](s[25]))-1),h(e,"width",a=s[12].bandwidth?s[12].bandwidth():s[10](s[25])),h(e,"height","2"),h(e,"fill","#27A0CC"),h(e,"stroke",s[0]),h(e,"stroke-width",s[1])},m(n,i){w(n,e,i)},p(n,i){i&6400&&l!==(l=n[12].bandwidth?n[8](n[25]):n[8](n[25])[0])&&h(e,"x",l),i&26624&&t!==(t=n[14](n[13](n[25]))-1)&&h(e,"y",t),i&7168&&a!==(a=n[12].bandwidth?n[12].bandwidth():n[10](n[25]))&&h(e,"width",a),i&1&&h(e,"stroke",n[0]),i&2&&h(e,"stroke-width",n[1])},d(n){n&&u(e)}}}function _s(s){let e,l,t,a,n,i,o,r=s[4](s[15](s[25]))+"",f,m,d,g=s[13]&&hs(s);return{c(){e=Se("rect"),g&&g.c(),o=Se("text"),f=K(r),this.h()},l(c){e=ze(c,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),y(e).forEach(u),g&&g.l(c),o=ze(c,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0});var k=y(o);f=D(k,r),k.forEach(u),this.h()},h(){h(e,"class","group-rect"),h(e,"data-id",l=s[27]),h(e,"x",t=s[12].bandwidth?s[8](s[25]):s[8](s[25])[0]),h(e,"y",a=s[7](s[25])),h(e,"width",n=s[12].bandwidth?s[12].bandwidth():s[10](s[25])),h(e,"height",i=s[9](s[25])),h(e,"fill",s[5]),h(e,"stroke",s[0]),h(e,"stroke-width",s[1]),h(o,"x",m=s[12].bandwidth?s[8](s[25])+s[12].bandwidth()/2:s[8](s[25])[0]),h(o,"y",d=s[7](s[25])-4),h(o,"dx",s[2]),h(o,"dy",s[3]),h(o,"text-anchor",s[6])},m(c,k){w(c,e,k),g&&g.m(c,k),w(c,o,k),_(o,f)},p(c,k){k&6400&&t!==(t=c[12].bandwidth?c[8](c[25]):c[8](c[25])[0])&&h(e,"x",t),k&2176&&a!==(a=c[7](c[25]))&&h(e,"y",a),k&7168&&n!==(n=c[12].bandwidth?c[12].bandwidth():c[10](c[25]))&&h(e,"width",n),k&2560&&i!==(i=c[9](c[25]))&&h(e,"height",i),k&32&&h(e,"fill",c[5]),k&1&&h(e,"stroke",c[0]),k&2&&h(e,"stroke-width",c[1]),c[13]?g?g.p(c,k):(g=hs(c),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null),k&34832&&r!==(r=c[4](c[15](c[25]))+"")&&le(f,r),k&6400&&m!==(m=c[12].bandwidth?c[8](c[25])+c[12].bandwidth()/2:c[8](c[25])[0])&&h(o,"x",m),k&2176&&d!==(d=c[7](c[25])-4)&&h(o,"y",d),k&4&&h(o,"dx",c[2]),k&8&&h(o,"dy",c[3]),k&64&&h(o,"text-anchor",c[6])},d(c){c&&u(e),g&&g.d(c),c&&u(o)}}}function Fn(s){let e,l=s[11],t=[];for(let a=0;a<l.length;a+=1)t[a]=_s(cs(s,l,a));return{c(){e=Se("g");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=ze(a,"g",{class:!0});var n=y(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(u),this.h()},h(){h(e,"class","column-group svelte-wgzwsk")},m(a,n){w(a,e,n);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(a,[n]){if(n&65535){l=a[11];let i;for(i=0;i<l.length;i+=1){const o=cs(a,l,i);t[i]?t[i].p(o,n):(t[i]=_s(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},i:H,o:H,d(a){a&&u(e),Je(t,a)}}}function qn(s,e,l){let t,a,n,i,o,r,f,m,d,g;const{data:c,xGet:k,yGet:p,yRange:N,xScale:A,yScale:I,y:F,z:R}=fl("LayerCake");ce(s,c,T=>l(11,r=T)),ce(s,k,T=>l(8,o=T)),ce(s,p,T=>l(7,n=T)),ce(s,N,T=>l(24,i=T)),ce(s,A,T=>l(12,f=T)),ce(s,I,T=>l(14,d=T)),ce(s,F,T=>l(15,g=T)),ce(s,R,T=>l(13,m=T));let{stroke:B=""}=e,{strokeWidth:P=0}=e,{dxTick:x=0}=e,{dyTick:fe=0}=e,{formatVal:$=T=>T}=e,{fill:X="#206095"}=e,{textAnchor:Z="middle"}=e;return s.$$set=T=>{"stroke"in T&&l(0,B=T.stroke),"strokeWidth"in T&&l(1,P=T.strokeWidth),"dxTick"in T&&l(2,x=T.dxTick),"dyTick"in T&&l(3,fe=T.dyTick),"formatVal"in T&&l(4,$=T.formatVal),"fill"in T&&l(5,X=T.fill),"textAnchor"in T&&l(6,Z=T.textAnchor)},s.$$.update=()=>{s.$$.dirty&256&&l(10,t=T=>{const W=o(T);return Math.max(0,W[1]-W[0])}),s.$$.dirty&16777344&&l(9,a=T=>i[0]-n(T))},[B,P,x,fe,$,X,Z,n,o,a,t,r,f,m,d,g,c,k,p,N,A,I,F,R,i]}class Rn extends pe{constructor(e){super();Ee(this,e,qn,Fn,we,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,formatVal:4,fill:5,textAnchor:6})}}function ds(s,e,l){const t=s.slice();return t[28]=e[l],t[30]=l,t}function ms(s){let e,l,t,a;return{c(){e=Se("line"),this.h()},l(n){e=ze(n,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),y(e).forEach(u),this.h()},h(){h(e,"y1",l=s[20]*-1),h(e,"y2",t=s[14]&&s[30]%2==0?s[10]+s[8]+2:s[10]+s[8]-13),h(e,"x1","0"),h(e,"x2","0"),h(e,"stroke",s[11]),h(e,"stroke-width",a=s[15]&&Array.isArray(s[4])&&s[30]==Math.floor(s[4].length/2)?2:1),h(e,"class","svelte-fwjh80"),wl(e,"baseline",s[13])},m(n,i){w(n,e,i)},p(n,i){i&1048576&&l!==(l=n[20]*-1)&&h(e,"y1",l),i&17664&&t!==(t=n[14]&&n[30]%2==0?n[10]+n[8]+2:n[10]+n[8]-13)&&h(e,"y2",t),i&2048&&h(e,"stroke",n[11]),i&32784&&a!==(a=n[15]&&Array.isArray(n[4])&&n[30]==Math.floor(n[4].length/2)?2:1)&&h(e,"stroke-width",a),i&8192&&wl(e,"baseline",n[13])},d(n){n&&u(e)}}}function On(s){let e=s[1](s[28])+"",l;return{c(){l=K(e)},l(t){l=D(t,e)},m(t,a){w(t,l,a)},p(t,a){a&262146&&e!==(e=t[1](t[28])+"")&&le(l,e)},d(t){t&&u(l)}}}function Gn(s){let e,l=s[1](s[28])+"",t,a;return{c(){e=K(s[5]),t=K(l),a=K(s[6])},l(n){e=D(n,s[5]),t=D(n,l),a=D(n,s[6])},m(n,i){w(n,e,i),w(n,t,i),w(n,a,i)},p(n,i){i&32&&le(e,n[5]),i&262146&&l!==(l=n[1](n[28])+"")&&le(t,l),i&64&&le(a,n[6])},d(n){n&&u(e),n&&u(t),n&&u(a)}}}function gs(s){let e,l,t,a,n,i,o,r,f=s[0]!==!1&&ms(s);function m(c,k){return c[30]==c[18].length-1?Gn:On}let d=m(s),g=d(s);return{c(){e=Se("g"),f&&f.c(),l=Se("text"),g.c(),this.h()},l(c){e=ze(c,"g",{class:!0,transform:!0});var k=y(e);f&&f.l(k),l=ze(k,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var p=y(l);g.l(p),p.forEach(u),k.forEach(u),this.h()},h(){h(l,"x",t=s[7]||s[16]?s[17].bandwidth()/2:0),h(l,"y",a=s[3]?s[20]*-1-6:s[14]&&s[30]%2==0?s[8]+15:s[8]),h(l,"dx",n=s[24](s[30])=="start"?s[9]-2:s[24](s[30])=="end"?s[9]+2:s[9]),h(l,"dy",s[10]),h(l,"text-anchor",i=s[24](s[30])),h(l,"fill",s[12]),h(l,"class","svelte-fwjh80"),wl(l,"bold",s[15]&&Array.isArray(s[4])&&s[30]==Math.floor(s[4].length/2)),h(e,"class",o="tick tick-"+s[28]+" svelte-fwjh80"),h(e,"transform",r="translate("+s[17](s[28])+","+s[19][0]+")")},m(c,k){w(c,e,k),f&&f.m(e,null),_(e,l),g.m(l,null)},p(c,k){c[0]!==!1?f?f.p(c,k):(f=ms(c),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d===(d=m(c))&&g?g.p(c,k):(g.d(1),g=d(c),g&&(g.c(),g.m(l,null))),k&196736&&t!==(t=c[7]||c[16]?c[17].bandwidth()/2:0)&&h(l,"x",t),k&1065224&&a!==(a=c[3]?c[20]*-1-6:c[14]&&c[30]%2==0?c[8]+15:c[8])&&h(l,"y",a),k&512&&n!==(n=c[24](c[30])=="start"?c[9]-2:c[24](c[30])=="end"?c[9]+2:c[9])&&h(l,"dx",n),k&1024&&h(l,"dy",c[10]),k&4096&&h(l,"fill",c[12]),k&32784&&wl(l,"bold",c[15]&&Array.isArray(c[4])&&c[30]==Math.floor(c[4].length/2)),k&262144&&o!==(o="tick tick-"+c[28]+" svelte-fwjh80")&&h(e,"class",o),k&917504&&r!==(r="translate("+c[17](c[28])+","+c[19][0]+")")&&h(e,"transform",r)},d(c){c&&u(e),f&&f.d(),g.d()}}}function ks(s){let e,l,t;return{c(){e=Se("line"),this.h()},l(a){e=ze(a,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),y(e).forEach(u),this.h()},h(){h(e,"class","baseline svelte-fwjh80"),h(e,"y1",s[20]),h(e,"y2","0"),h(e,"x1",l=s[17](0)),h(e,"x2",t=s[17](0)),h(e,"stroke",s[11])},m(a,n){w(a,e,n)},p(a,n){n&1048576&&h(e,"y1",a[20]),n&131072&&l!==(l=a[17](0))&&h(e,"x1",l),n&131072&&t!==(t=a[17](0))&&h(e,"x2",t),n&2048&&h(e,"stroke",a[11])},d(a){a&&u(e)}}}function Wn(s){let e,l,t=s[18],a=[];for(let i=0;i<t.length;i+=1)a[i]=gs(ds(s,t,i));let n=s[2]===!0&&ks(s);return{c(){e=Se("g");for(let i=0;i<a.length;i+=1)a[i].c();l=_e(),n&&n.c(),this.h()},l(i){e=ze(i,"g",{class:!0});var o=y(e);for(let r=0;r<a.length;r+=1)a[r].l(o);l=_e(),n&&n.l(o),o.forEach(u),this.h()},h(){h(e,"class","axis x-axis")},m(i,o){w(i,e,o);for(let r=0;r<a.length;r+=1)a[r].m(e,null);_(e,l),n&&n.m(e,null)},p(i,[o]){if(o&18874363){t=i[18];let r;for(r=0;r<t.length;r+=1){const f=ds(i,t,r);a[r]?a[r].p(f,o):(a[r]=gs(f),a[r].c(),a[r].m(e,l))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}i[2]===!0?n?n.p(i,o):(n=ks(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:H,o:H,d(i){i&&u(e),Je(a,i),n&&n.d()}}}function Hn(s,e,l){let t,a,n,i,o;const{width:r,height:f,xScale:m,yScale:d,yRange:g}=fl("LayerCake");ce(s,f,C=>l(20,o=C)),ce(s,m,C=>l(17,n=C)),ce(s,g,C=>l(19,i=C));let{gridlines:c=!0}=e,{formatTick:k=C=>C}=e,{baseline:p=!1}=e,{flipped:N=!1}=e,{snapTicks:A=!1}=e,{ticks:I=void 0}=e,{prefix:F=""}=e,{suffix:R=""}=e,{xTick:B=void 0}=e,{yTick:P=15}=e,{dxTick:x=0}=e,{dyTick:fe=0}=e,{lineColor:$="#999"}=e,{textColor:X="#555"}=e,{solid:Z=!1}=e,{stagger:T=!1}=e,{median:W=!1}=e;function ie(C){if(A===!0){if(C===0)return"start";if(C===a.length-1)return"end"}return"middle"}return s.$$set=C=>{"gridlines"in C&&l(0,c=C.gridlines),"formatTick"in C&&l(1,k=C.formatTick),"baseline"in C&&l(2,p=C.baseline),"flipped"in C&&l(3,N=C.flipped),"snapTicks"in C&&l(25,A=C.snapTicks),"ticks"in C&&l(4,I=C.ticks),"prefix"in C&&l(5,F=C.prefix),"suffix"in C&&l(6,R=C.suffix),"xTick"in C&&l(7,B=C.xTick),"yTick"in C&&l(8,P=C.yTick),"dxTick"in C&&l(9,x=C.dxTick),"dyTick"in C&&l(10,fe=C.dyTick),"lineColor"in C&&l(11,$=C.lineColor),"textColor"in C&&l(12,X=C.textColor),"solid"in C&&l(13,Z=C.solid),"stagger"in C&&l(14,T=C.stagger),"median"in C&&l(15,W=C.median)},s.$$.update=()=>{s.$$.dirty&131072&&l(16,t=typeof n.bandwidth=="function"),s.$$.dirty&196624&&l(18,a=Array.isArray(I)?I:t?n.domain():n.ticks(I))},[c,k,p,N,I,F,R,B,P,x,fe,$,X,Z,T,W,t,n,a,i,o,f,m,g,ie,A]}class vs extends pe{constructor(e){super();Ee(this,e,Hn,Wn,we,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function Un(s){let e,l,t,a;return e=new Rn({props:{fill:s[1],formatVal:s[5]}}),t=new vs({props:{gridlines:!1}}),{c(){te(e.$$.fragment),l=M(),te(t.$$.fragment)},l(n){ae(e.$$.fragment,n),l=L(n),ae(t.$$.fragment,n)},m(n,i){se(e,n,i),w(n,l,i),se(t,n,i),a=!0},p(n,i){const o={};i&2&&(o.fill=n[1]),i&32&&(o.formatVal=n[5]),e.$set(o)},i(n){a||(j(e.$$.fragment,n),j(t.$$.fragment,n),a=!0)},o(n){q(e.$$.fragment,n),q(t.$$.fragment,n),a=!1},d(n){ne(e,n),n&&u(l),ne(t,n)}}}function Zn(s){let e,l;return e=new Ya({props:{$$slots:{default:[Un]},$$scope:{ctx:s}}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a&1058&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Jn(s){let e,l,t;return l=new Xa({props:{padding:{top:15,right:0,bottom:20,left:0},x:s[2],y:s[3],z:s[4],xScale:cn().paddingInner([.02]).round(!0),xDomain:s[7],yDomain:s[6],zDomain:s[6],data:s[0],$$slots:{default:[Zn]},$$scope:{ctx:s}}}),{c(){e=v("div"),te(l.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=y(e);ae(l.$$.fragment,n),n.forEach(u),this.h()},h(){h(e,"class","chart-container svelte-s9z6lx")},m(a,n){w(a,e,n),se(l,e,null),t=!0},p(a,[n]){const i={};n&4&&(i.x=a[2]),n&8&&(i.y=a[3]),n&16&&(i.z=a[4]),n&128&&(i.xDomain=a[7]),n&64&&(i.yDomain=a[6]),n&64&&(i.zDomain=a[6]),n&1&&(i.data=a[0]),n&1058&&(i.$$scope={dirty:n,ctx:a}),l.$set(i)},i(a){t||(j(l.$$.fragment,a),t=!0)},o(a){q(l.$$.fragment,a),t=!1},d(a){a&&u(e),ne(l)}}}function Xn(s,e,l){let t,a,n,{data:i}=e,{suffix:o="%"}=e,{decimals:r=0}=e,{fill:f="#206095"}=e,{xKey:m="x"}=e,{yKey:d="y"}=e,{zKey:g=null}=e;return s.$$set=c=>{"data"in c&&l(0,i=c.data),"suffix"in c&&l(8,o=c.suffix),"decimals"in c&&l(9,r=c.decimals),"fill"in c&&l(1,f=c.fill),"xKey"in c&&l(2,m=c.xKey),"yKey"in c&&l(3,d=c.yKey),"zKey"in c&&l(4,g=c.zKey)},s.$$.update=()=>{s.$$.dirty&5&&l(7,t=i.map(c=>c[m])),s.$$.dirty&9&&l(6,a=[0,Math.max(...i.map(c=>c[d]))]),s.$$.dirty&768&&l(5,n=c=>c.toFixed(r)+o)},[i,f,m,d,g,n,a,t,o,r]}class bs extends pe{constructor(e){super();Ee(this,e,Xn,Jn,we,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4})}}function ys(s,e,l){const t=s.slice();return t[7]=e[l],t[9]=l,t}function ps(s){let e,l=s[0],t=[];for(let a=0;a<l.length;a+=1)t[a]=Es(ys(s,l,a));return{c(){e=v("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var n=y(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(u),this.h()},h(){h(e,"class","stack svelte-q6mgyr")},m(a,n){w(a,e,n);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(a,n){if(n&31){l=a[0];let i;for(i=0;i<l.length;i+=1){const o=ys(a,l,i);t[i]?t[i].p(o,n):(t[i]=Es(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(a){a&&u(e),Je(t,a)}}}function Es(s){let e;return{c(){e=v("div"),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0}),y(e).forEach(u),this.h()},h(){h(e,"class","cell svelte-q6mgyr"),Y(e,"left",s[4][s[9]]/s[3]*100+"%"),Y(e,"width",s[7][s[1]]/s[3]*100+"%"),Y(e,"background-color",s[2][s[9]])},m(l,t){w(l,e,t)},p(l,t){t&24&&Y(e,"left",l[4][l[9]]/l[3]*100+"%"),t&11&&Y(e,"width",l[7][l[1]]/l[3]*100+"%"),t&4&&Y(e,"background-color",l[2][l[9]])},d(l){l&&u(e)}}}function Yn(s){let e,l=s[3]&&s[4]&&ps(s);return{c(){l&&l.c(),e=_e()},l(t){l&&l.l(t),e=_e()},m(t,a){l&&l.m(t,a),w(t,e,a)},p(t,[a]){t[3]&&t[4]?l?l.p(t,a):(l=ps(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:H,o:H,d(t){l&&l.d(t),t&&u(e)}}}function Qn(s,e,l){let{data:t}=e,{xKey:a="x"}=e,{yKey:n="y"}=e,{colors:i=["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]}=e,o,r;function f(){l(3,o=t.map(d=>d[n]).reduce((d,g)=>d+g,0));let m=[0];t.forEach(d=>m.push(m[m.length-1]+d[n])),l(4,r=m)}return s.$$set=m=>{"data"in m&&l(0,t=m.data),"xKey"in m&&l(5,a=m.xKey),"yKey"in m&&l(1,n=m.yKey),"colors"in m&&l(2,i=m.colors)},s.$$.update=()=>{s.$$.dirty&3&&(t||n)&&f()},[t,n,i,o,r,a]}class ws extends pe{constructor(e){super();Ee(this,e,Qn,Yn,we,{data:0,xKey:5,yKey:1,colors:2})}}function Ss(s,e,l){const t=s.slice();return t[12]=e[l],t[14]=l,t}function xn(s){let e,l,t=s[8](s[12][s[3]])+"",a,n;return{c(){e=v("span"),l=K("("),a=K(t),n=K(")"),this.h()},l(i){e=b(i,"SPAN",{class:!0,style:!0});var o=y(e);l=D(o,"("),a=D(o,t),n=D(o,")"),o.forEach(u),this.h()},h(){h(e,"class",""),Y(e,"color",s[6])},m(i,o){w(i,e,o),_(e,l),_(e,a),_(e,n)},p(i,o){o&9&&t!==(t=i[8](i[12][i[3]])+"")&&le(a,t),o&64&&Y(e,"color",i[6])},d(i){i&&u(e)}}}function $n(s){let e,l=fs(Math.round(s[12][s[2]]-s[12][s[3]]),"pp")+"",t,a;return{c(){e=v("span"),t=K(l),this.h()},l(n){e=b(n,"SPAN",{class:!0});var i=y(e);t=D(i,l),i.forEach(u),this.h()},h(){h(e,"class",a=""+(Qa(rs(Math.round(s[12][s[2]]-s[12][s[3]])))+" svelte-w1gwgt"))},m(n,i){w(n,e,i),_(e,t)},p(n,i){i&13&&l!==(l=fs(Math.round(n[12][n[2]]-n[12][n[3]]),"pp")+"")&&le(t,l),i&13&&a!==(a=""+(Qa(rs(Math.round(n[12][n[2]]-n[12][n[3]])))+" svelte-w1gwgt"))&&h(e,"class",a)},d(n){n&&u(e)}}}function zs(s){let e,l,t,a=s[12][s[1]]+"",n,i,o=s[8](s[12][s[2]])+"",r,f,m;function d(k,p){if(k[3]=="prev")return $n;if(k[3])return xn}let g=d(s),c=g&&g(s);return{c(){e=v("li"),l=v("div"),t=M(),n=K(a),i=M(),r=K(o),f=M(),c&&c.c(),m=M(),this.h()},l(k){e=b(k,"LI",{style:!0,class:!0});var p=y(e);l=b(p,"DIV",{class:!0,style:!0}),y(l).forEach(u),t=L(p),n=D(p,a),i=L(p),r=D(p,o),f=L(p),c&&c.l(p),m=L(p),p.forEach(u),this.h()},h(){h(l,"class","bullet svelte-w1gwgt"),Y(l,"background-color",s[4][s[14]]),wl(l,"round",s[7]),Y(e,"color",s[5]),h(e,"class","svelte-w1gwgt")},m(k,p){w(k,e,p),_(e,l),_(e,t),_(e,n),_(e,i),_(e,r),_(e,f),c&&c.m(e,null),_(e,m)},p(k,p){p&16&&Y(l,"background-color",k[4][k[14]]),p&128&&wl(l,"round",k[7]),p&3&&a!==(a=k[12][k[1]]+"")&&le(n,a),p&5&&o!==(o=k[8](k[12][k[2]])+"")&&le(r,o),g===(g=d(k))&&c?c.p(k,p):(c&&c.d(1),c=g&&g(k),c&&(c.c(),c.m(e,m))),p&32&&Y(e,"color",k[5])},d(k){k&&u(e),c&&c.d()}}}function ei(s){let e,l=s[0],t=[];for(let a=0;a<l.length;a+=1)t[a]=zs(Ss(s,l,a));return{c(){e=v("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"UL",{class:!0});var n=y(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(u),this.h()},h(){h(e,"class","svelte-w1gwgt")},m(a,n){w(a,e,n);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(a,[n]){if(n&511){l=a[0];let i;for(i=0;i<l.length;i+=1){const o=Ss(a,l,i);t[i]?t[i].p(o,n):(t[i]=zs(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},i:H,o:H,d(a){a&&u(e),Je(t,a)}}}function li(s,e,l){let t,{data:a}=e,{xKey:n="x"}=e,{yKey:i="y"}=e,{zKey:o="ew"}=e,{colors:r=["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]}=e,{textColor:f="#555"}=e,{mutedColor:m="#999"}=e,{decimals:d=null}=e,{round:g=!1}=e;function c(k){let p;return d?p=(k/t*100).toFixed(d)+"%":k/t*100<.1?p="<0.1%":k/t*100<1?p="<1%":p=(k/t*100).toFixed(0)+"%",p}return s.$$set=k=>{"data"in k&&l(0,a=k.data),"xKey"in k&&l(1,n=k.xKey),"yKey"in k&&l(2,i=k.yKey),"zKey"in k&&l(3,o=k.zKey),"colors"in k&&l(4,r=k.colors),"textColor"in k&&l(5,f=k.textColor),"mutedColor"in k&&l(6,m=k.mutedColor),"decimals"in k&&l(9,d=k.decimals),"round"in k&&l(7,g=k.round)},s.$$.update=()=>{s.$$.dirty&5&&(t=a.map(k=>k[i]).reduce((k,p)=>k+p,0)),s.$$.dirty&9&&a.map(k=>k[o]).reduce((k,p)=>k+p,0)},[a,n,i,o,r,f,m,g,c,d]}class ti extends pe{constructor(e){super();Ee(this,e,li,ei,we,{data:0,xKey:1,yKey:2,zKey:3,colors:4,textColor:5,mutedColor:6,decimals:9,round:7})}}function Cs(s){let e,l,t,a;l=new ws({props:{data:s[0],yKey:s[4],colors:s[5]}});let n=s[7]&&As(s);return{c(){e=v("div"),te(l.$$.fragment),t=M(),n&&n.c(),this.h()},l(i){e=b(i,"DIV",{class:!0,style:!0});var o=y(e);ae(l.$$.fragment,o),t=L(o),n&&n.l(o),o.forEach(u),this.h()},h(){h(e,"class","chart svelte-67hhqc"),Y(e,"height",s[1]*.25+"px")},m(i,o){w(i,e,o),se(l,e,null),_(e,t),n&&n.m(e,null),a=!0},p(i,o){const r={};o&1&&(r.data=i[0]),o&16&&(r.yKey=i[4]),o&32&&(r.colors=i[5]),l.$set(r),i[7]?n?n.p(i,o):(n=As(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null),(!a||o&2)&&Y(e,"height",i[1]*.25+"px")},i(i){a||(j(l.$$.fragment,i),a=!0)},o(i){q(l.$$.fragment,i),a=!1},d(i){i&&u(e),ne(l),n&&n.d()}}}function As(s){let e,l;return{c(){e=v("div"),l=K(s[7]),this.h()},l(t){e=b(t,"DIV",{class:!0});var a=y(e);l=D(a,s[7]),a.forEach(u),this.h()},h(){h(e,"class","label svelte-67hhqc")},m(t,a){w(t,e,a),_(e,l)},p(t,a){a&128&&le(l,t[7])},d(t){t&&u(e)}}}function ai(s){let e,l,t,a,n,i,o;l=new ws({props:{data:s[0],yKey:s[3],colors:s[5]}});let r=s[4]&&Cs(s);return i=new ti({props:{data:s[0],xKey:s[2],yKey:s[3],zKey:s[4],decimals:s[6],colors:s[5]}}),{c(){e=v("div"),te(l.$$.fragment),t=M(),r&&r.c(),a=M(),n=v("div"),te(i.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0,style:!0});var m=y(e);ae(l.$$.fragment,m),m.forEach(u),t=L(f),r&&r.l(f),a=L(f),n=b(f,"DIV",{class:!0});var d=y(n);ae(i.$$.fragment,d),d.forEach(u),this.h()},h(){h(e,"class","chart svelte-67hhqc"),Y(e,"height",(s[4]?s[1]*.75:s[1])+"px"),h(n,"class","legend svelte-67hhqc")},m(f,m){w(f,e,m),se(l,e,null),w(f,t,m),r&&r.m(f,m),w(f,a,m),w(f,n,m),se(i,n,null),o=!0},p(f,[m]){const d={};m&1&&(d.data=f[0]),m&8&&(d.yKey=f[3]),m&32&&(d.colors=f[5]),l.$set(d),(!o||m&18)&&Y(e,"height",(f[4]?f[1]*.75:f[1])+"px"),f[4]?r?(r.p(f,m),m&16&&j(r,1)):(r=Cs(f),r.c(),j(r,1),r.m(a.parentNode,a)):r&&(ve(),q(r,1,1,()=>{r=null}),be());const g={};m&1&&(g.data=f[0]),m&4&&(g.xKey=f[2]),m&8&&(g.yKey=f[3]),m&16&&(g.zKey=f[4]),m&64&&(g.decimals=f[6]),m&32&&(g.colors=f[5]),i.$set(g)},i(f){o||(j(l.$$.fragment,f),j(r),j(i.$$.fragment,f),o=!0)},o(f){q(l.$$.fragment,f),q(r),q(i.$$.fragment,f),o=!1},d(f){f&&u(e),ne(l),f&&u(t),r&&r.d(f),f&&u(a),f&&u(n),ne(i)}}}function si(s,e,l){let{data:t}=e,{height:a=80}=e,{xKey:n="x"}=e,{yKey:i="y"}=e,{zKey:o="ew"}=e,{colors:r=["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]}=e,{decimals:f=null}=e,{label:m=null}=e;return s.$$set=d=>{"data"in d&&l(0,t=d.data),"height"in d&&l(1,a=d.height),"xKey"in d&&l(2,n=d.xKey),"yKey"in d&&l(3,i=d.yKey),"zKey"in d&&l(4,o=d.zKey),"colors"in d&&l(5,r=d.colors),"decimals"in d&&l(6,f=d.decimals),"label"in d&&l(7,m=d.label)},[t,a,n,i,o,r,f,m]}class Cl extends pe{constructor(e){super();Ee(this,e,si,ai,we,{data:0,height:1,xKey:2,yKey:3,zKey:4,colors:5,decimals:6,label:7})}}function Ks(s){let e;const l=s[14].default,t=$t(l,s,s[13],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&8192)&&ea(t,l,a,a[13],e?ta(l,a[13],n,null):la(a[13]),null)},i(a){e||(j(t,a),e=!0)},o(a){q(t,a),e=!1},d(a){t&&t.d(a)}}}function ni(s){let e,l,t,a=s[0]&&Ks(s);return{c(){e=v("div"),a&&a.c(),this.h()},l(n){e=b(n,"DIV",{class:!0,id:!0});var i=y(e);a&&a.l(i),i.forEach(u),this.h()},h(){h(e,"class","absolute top-0 bg-grey4 w-full h-full svelte-xiczo6"),h(e,"id",s[1]),dt(()=>s[15].call(e))},m(n,i){w(n,e,i),a&&a.m(e,null),l=xa(e,s[15].bind(e)),s[16](e),t=!0},p(n,[i]){n[0]?a?(a.p(n,i),i&1&&j(a,1)):(a=Ks(n),a.c(),j(a,1),a.m(e,null)):a&&(ve(),q(a,1,1,()=>{a=null}),be()),(!t||i&2)&&h(e,"id",n[1])},i(n){t||(j(a),t=!0)},o(n){q(a),t=!1},d(n){n&&u(e),a&&a.d(),l(),s[16](null)}}}function ii(s,e,l){let{$$slots:t={},$$scope:a}=e,{map:n}=e,{id:i="map"}=e,{location:o={bounds:[[-5.816,49.864],[1.863,55.872]]}}=e,{style:r="https://bothness.github.io/ons-basemaps/data/style-omt.json"}=e,{interactive:f=!0}=e,{minzoom:m=0}=e,{maxzoom:d=14}=e,{zoom:g=null}=e,{scrollzoom:c=!0}=e,{geolocate:k=!0}=e,{zoomcontrol:p=!0}=e,N,A,I;aa("map",{getMap:()=>n}),o.bounds?I={bounds:o.bounds}:o.lon&&o.lat&&(I={center:[o.lon,o.lat]},o.zoom&&(I.zoom=o.zoom)),hn(()=>{const P=document.createElement("link");return P.rel="stylesheet",P.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",P.onload=()=>{l(0,n=new mt.Map(zl({container:N,style:r,minZoom:m,maxZoom:d,interactive:f},I))),p&&n.addControl(new mt.NavigationControl({showCompass:!1})),c||n.scrollZoom.disable(),k&&n.addControl(new mt.GeolocateControl),n.on("load",()=>{l(4,g=n.getZoom())}),n.on("zoom",()=>{l(4,g=n.getZoom())})},document.head.appendChild(P),()=>{n.remove(),P.parentNode.removeChild(P)}});function F(){let P=document.getElementsByClassName("mapboxgl-canvas");P[0]&&(P[0].style.width="100%",n.resize())}function R(){A=this.clientWidth,l(2,A)}function B(P){sa[P?"unshift":"push"](()=>{N=P,l(3,N)})}return s.$$set=P=>{"map"in P&&l(0,n=P.map),"id"in P&&l(1,i=P.id),"location"in P&&l(5,o=P.location),"style"in P&&l(6,r=P.style),"interactive"in P&&l(7,f=P.interactive),"minzoom"in P&&l(8,m=P.minzoom),"maxzoom"in P&&l(9,d=P.maxzoom),"zoom"in P&&l(4,g=P.zoom),"scrollzoom"in P&&l(10,c=P.scrollzoom),"geolocate"in P&&l(11,k=P.geolocate),"zoomcontrol"in P&&l(12,p=P.zoomcontrol),"$$scope"in P&&l(13,a=P.$$scope)},s.$$.update=()=>{s.$$.dirty&4&&A&&F()},[n,i,A,N,g,o,r,f,m,d,c,k,p,a,t,R,B]}class oi extends pe{constructor(e){super();Ee(this,e,ii,ni,we,{map:0,id:1,location:5,style:6,interactive:7,minzoom:8,maxzoom:9,zoom:4,scrollzoom:10,geolocate:11,zoomcontrol:12})}}function Ds(s){let e;const l=s[11].default,t=$t(l,s,s[10],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&1024)&&ea(t,l,a,a[10],e?ta(l,a[10],n,null):la(a[10]),null)},i(a){e||(j(t,a),e=!0)},o(a){q(t,a),e=!1},d(a){t&&t.d(a)}}}function ri(s){let e,l,t=s[0]&&Ds(s);return{c(){t&&t.c(),e=_e()},l(a){t&&t.l(a),e=_e()},m(a,n){t&&t.m(a,n),w(a,e,n),l=!0},p(a,[n]){a[0]?t?(t.p(a,n),n&1&&j(t,1)):(t=Ds(a),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(ve(),q(t,1,1,()=>{t=null}),be())},i(a){l||(j(t),l=!0)},o(a){q(t),l=!1},d(a){t&&t.d(a),a&&u(e)}}}function fi(s,e,l){let{$$slots:t={},$$scope:a}=e,{id:n}=e,{type:i}=e,{url:o=null}=e,{props:r={}}=e,{data:f=null}=e,{layer:m=null}=e,{promoteId:d=null}=e,{minzoom:g=null}=e,{maxzoom:c=null}=e,k=!1;const{getMap:p}=fl("map"),N=p();aa("source",{source:n,sourceLayer:m}),N.getSource(n)&&N.removeSource(n);function A(){N.isSourceLoaded(n)?(l(0,k=!0),console.log(n+" loaded!")):setTimeout(()=>{console.log("..."),A()},500)}function I(){N.isStyleLoaded(n)?(F(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),I()},500)}g&&(r.minzoom=g),c&&(r.maxzoom=c),m&&d?(r.promoteId={},r.promoteId[m]=d):d&&(r.promoteId=d);function F(){console.log(n+" map source loading..."),i=="geojson"?f?(N.addSource(n,zl({type:i,data:f},r)),A()):o&&(N.addSource(n,zl({type:i,data:o},r)),A()):i=="vector"&&(N.addSource(n,zl({type:i,tiles:[o]},r)),A())}I();function R(){N.getSource(n).setData(f)}return s.$$set=B=>{"id"in B&&l(2,n=B.id),"type"in B&&l(3,i=B.type),"url"in B&&l(4,o=B.url),"props"in B&&l(1,r=B.props),"data"in B&&l(5,f=B.data),"layer"in B&&l(6,m=B.layer),"promoteId"in B&&l(7,d=B.promoteId),"minzoom"in B&&l(8,g=B.minzoom),"maxzoom"in B&&l(9,c=B.maxzoom),"$$scope"in B&&l(10,a=B.$$scope)},s.$$.update=()=>{s.$$.dirty&33&&k&&f&&R()},[k,r,n,i,o,f,m,d,g,c,a,t]}class ui extends pe{constructor(e){super();Ee(this,e,fi,ri,we,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function ci(s,e,l){const t=_n(),a=new mt.Popup({closeButton:!1,closeOnClick:!1});let{id:n}=e,{type:i}=e,{filter:o=null}=e,{layout:r={}}=e,{paint:f={}}=e,{data:m=null}=e,{geoCode:d=null}=e,{colorCode:g=null}=e,{nameCode:c=null}=e,{valueCode:k=null}=e,{click:p=!1}=e,{ignoreClick:N=!1}=e,{clickCenter:A=!1}=e,{selected:I=null}=e,{hover:F=!1}=e,{hovered:R=null}=e,{highlight:B=!1}=e,{highlightKey:P="highlighted"}=e,{highlighted:x=[]}=e,{order:fe=null}=e,{maxzoom:$=null}=e,{minzoom:X=null}=e,{tooltip:Z=!1}=e;const{source:T,sourceLayer:W}=fl("source"),{getMap:ie}=fl("map"),C=ie();let S=null,G=null,U=[];C.getLayer(n)&&C.removeLayer(n);let me={id:n,type:i,source:T,paint:f,layout:r};o&&(me.filter=o),W&&(me["source-layer"]=W),$&&(me.maxzoom=$),X&&(me.minzoom=X),C.addLayer(me,fe);function ge(){m.forEach(V=>{C.setFeatureState({source:T,sourceLayer:W,id:V[d]},{color:g?V[g]:null,name:c?V[c]:null,value:k?V[k]:null})})}return p&&C.on("click",n,V=>{if(V.features.length>0&&!N){if(l(0,I=V.features[0].id),t("select",{code:I}),S&&C.setFeatureState({source:T,sourceLayer:W,id:S},{selected:!1}),C.setFeatureState({source:T,sourceLayer:W,id:I},{selected:!0}),A){let ue=centroid(V.features[0].toJSON().geometry);C.flyTo({center:ue.geometry.coordinates})}l(23,S=I)}}),F&&(C.on("mousemove",n,V=>{if(V.features.length>0){R&&C.setFeatureState({source:T,sourceLayer:W,id:R},{hovered:!1}),l(1,R=l(24,G=V.features[0].id)),C.setFeatureState({source:T,sourceLayer:W,id:R},{hovered:!0}),C.getCanvas().style.cursor="pointer";let ue=C.getFeatureState({source:T,sourceLayer:W,id:R});Z&&ue.name&&a.setLngLat(V.lngLat).setHTML(`<strong>${ue.name}</strong>${ue.value?"<br/>"+ue.value.toFixed(1)+"%":"<br/>Data not available"}`).addTo(C)}}),C.on("mouseleave",n,V=>{R&&C.setFeatureState({source:T,sourceLayer:W,id:R},{hovered:!1}),l(1,R=l(24,G=null)),C.getCanvas().style.cursor="",Z&&a.remove()})),s.$$set=V=>{"id"in V&&l(2,n=V.id),"type"in V&&l(3,i=V.type),"filter"in V&&l(4,o=V.filter),"layout"in V&&l(5,r=V.layout),"paint"in V&&l(6,f=V.paint),"data"in V&&l(7,m=V.data),"geoCode"in V&&l(8,d=V.geoCode),"colorCode"in V&&l(9,g=V.colorCode),"nameCode"in V&&l(10,c=V.nameCode),"valueCode"in V&&l(11,k=V.valueCode),"click"in V&&l(12,p=V.click),"ignoreClick"in V&&l(13,N=V.ignoreClick),"clickCenter"in V&&l(14,A=V.clickCenter),"selected"in V&&l(0,I=V.selected),"hover"in V&&l(15,F=V.hover),"hovered"in V&&l(1,R=V.hovered),"highlight"in V&&l(16,B=V.highlight),"highlightKey"in V&&l(17,P=V.highlightKey),"highlighted"in V&&l(18,x=V.highlighted),"order"in V&&l(19,fe=V.order),"maxzoom"in V&&l(20,$=V.maxzoom),"minzoom"in V&&l(21,X=V.minzoom),"tooltip"in V&&l(22,Z=V.tooltip)},s.$$.update=()=>{s.$$.dirty[0]&640&&(m||g)&&ge(),s.$$.dirty[0]&34013184&&B&&x!=U&&(U[0]&&U.forEach(V=>{let ue={};ue[P]=!1,C.setFeatureState({source:T,sourceLayer:W,id:V},ue)}),l(25,U=x),x[0]&&x.forEach(V=>{let ue={};ue[P]=!0,C.setFeatureState({source:T,sourceLayer:W,id:V},ue)})),s.$$.dirty[0]&8392705&&p&&I!=S&&(S&&C.setFeatureState({source:T,sourceLayer:W,id:S},{selected:!1}),I&&C.setFeatureState({source:T,sourceLayer:W,id:I},{selected:!0}),l(23,S=I)),s.$$.dirty[0]&16809986&&F&&R!=G&&(G&&C.setFeatureState({source:T,sourceLayer:W,id:G},{hovered:!1}),R&&C.setFeatureState({source:T,sourceLayer:W,id:R},{hovered:!0}),l(24,G=R))},[I,R,n,i,o,r,f,m,d,g,c,k,p,N,A,F,B,P,x,fe,$,X,Z,S,G,U]}class Ts extends pe{constructor(e){super();Ee(this,e,ci,null,we,{id:2,type:3,filter:4,layout:5,paint:6,data:7,geoCode:8,colorCode:9,nameCode:10,valueCode:11,click:12,ignoreClick:13,clickCenter:14,selected:0,hover:15,hovered:1,highlight:16,highlightKey:17,highlighted:18,order:19,maxzoom:20,minzoom:21,tooltip:22},null,[-1,-1])}}function Ps(s,e,l){const t=s.slice();return t[8]=e[l],t[10]=l,t}function Ns(s){let e,l,t,a,n,i;return{c(){e=Se("rect"),this.h()},l(o){e=ze(o,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),y(e).forEach(u),this.h()},h(){h(e,"class","group-rect"),h(e,"x",l=s[3](s[8])),h(e,"y",t=s[4][1]),h(e,"width",a=s[3](s[0][s[10]+1])-s[3](s[8])),h(e,"height",n=s[4][0]),h(e,"fill",i=s[1][s[10]])},m(o,r){w(o,e,r)},p(o,r){r&9&&l!==(l=o[3](o[8]))&&h(e,"x",l),r&16&&t!==(t=o[4][1])&&h(e,"y",t),r&9&&a!==(a=o[3](o[0][o[10]+1])-o[3](o[8]))&&h(e,"width",a),r&16&&n!==(n=o[4][0])&&h(e,"height",n),r&2&&i!==(i=o[1][o[10]])&&h(e,"fill",i)},d(o){o&&u(e)}}}function hi(s){let e,l=s[0].slice(0,-1),t=[];for(let a=0;a<l.length;a+=1)t[a]=Ns(Ps(s,l,a));return{c(){e=Se("g");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=ze(a,"g",{class:!0,opacity:!0});var n=y(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(u),this.h()},h(){h(e,"class","stack-group"),h(e,"opacity",s[2])},m(a,n){w(a,e,n);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(a,[n]){if(n&27){l=a[0].slice(0,-1);let i;for(i=0;i<l.length;i+=1){const o=Ps(a,l,i);t[i]?t[i].p(o,n):(t[i]=Ns(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}n&4&&h(e,"opacity",a[2])},i:H,o:H,d(a){a&&u(e),Je(t,a)}}}function _i(s,e,l){let t,a;const{xGet:n,xScale:i,yRange:o}=fl("LayerCake");ce(s,i,d=>l(3,t=d)),ce(s,o,d=>l(4,a=d));let{ticks:r}=e,{colors:f=["lightgrey","grey","grey","lightgrey"]}=e,{opacity:m=1}=e;return s.$$set=d=>{"ticks"in d&&l(0,r=d.ticks),"colors"in d&&l(1,f=d.colors),"opacity"in d&&l(2,m=d.opacity)},[r,f,m,t,a,i,o]}class di extends pe{constructor(e){super();Ee(this,e,_i,hi,we,{ticks:0,colors:1,opacity:2})}}function Is(s,e,l){const t=s.slice();return t[18]=e[l],t}function Vs(s){let e,l,t,a,n,i;return{c(){e=Se("g"),l=Se("line"),this.h()},l(o){e=ze(o,"g",{class:!0});var r=y(e);l=ze(r,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),y(l).forEach(u),r.forEach(u),this.h()},h(){h(l,"x1",t=s[0]=="y"?s[5](s[2]):s[6](s[18])),h(l,"x2",a=s[0]=="y"?s[5](s[3]):s[6](s[18])),h(l,"y1",n=s[0]=="y"?s[7](s[18]):s[8](s[2])),h(l,"y2",i=s[0]=="y"?s[7](s[18]):s[8](s[3])),h(l,"stroke",s[1]),h(l,"stroke-width","3"),h(l,"stroke-linecap","butt"),h(e,"class","marker")},m(o,r){w(o,e,r),_(e,l)},p(o,r){r&117&&t!==(t=o[0]=="y"?o[5](o[2]):o[6](o[18]))&&h(l,"x1",t),r&121&&a!==(a=o[0]=="y"?o[5](o[3]):o[6](o[18]))&&h(l,"x2",a),r&405&&n!==(n=o[0]=="y"?o[7](o[18]):o[8](o[2]))&&h(l,"y1",n),r&409&&i!==(i=o[0]=="y"?o[7](o[18]):o[8](o[3]))&&h(l,"y2",i),r&2&&h(l,"stroke",o[1])},d(o){o&&u(e)}}}function mi(s){let e,l=s[4],t=[];for(let a=0;a<l.length;a+=1)t[a]=Vs(Is(s,l,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=_e()},l(a){for(let n=0;n<t.length;n+=1)t[n].l(a);e=_e()},m(a,n){for(let i=0;i<t.length;i+=1)t[i].m(a,n);w(a,e,n)},p(a,[n]){if(n&511){l=a[4];let i;for(i=0;i<l.length;i+=1){const o=Is(a,l,i);t[i]?t[i].p(o,n):(t[i]=Vs(o),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},i:H,o:H,d(a){Je(t,a),a&&u(e)}}}function gi(s,e,l){let t,a,n,i,o,r,f,m,d;const{data:g,xGet:c,yGet:k,xScale:p,yScale:N,xDomain:A,yDomain:I}=fl("LayerCake");ce(s,g,B=>l(4,o=B)),ce(s,c,B=>l(6,f=B)),ce(s,k,B=>l(7,m=B)),ce(s,p,B=>l(5,r=B)),ce(s,N,B=>l(8,d=B)),ce(s,A,B=>l(17,i=B)),ce(s,I,B=>l(16,n=B));let{axis:F="x"}=e,{color:R="orange"}=e;return s.$$set=B=>{"axis"in B&&l(0,F=B.axis),"color"in B&&l(1,R=B.color)},s.$$.update=()=>{s.$$.dirty&196609&&l(3,t=F=="y"?i[0]:n[0]),s.$$.dirty&196609&&l(2,a=F=="y"?i[1]:n[1])},[F,R,a,t,o,r,f,m,d,g,c,k,p,N,A,I,n,i]}class ki extends pe{constructor(e){super();Ee(this,e,gi,mi,we,{axis:0,color:1})}}function vi(s){let e,l,t,a,n,i;return e=new di({props:{ticks:s[1],colors:s[2]}}),t=new vs({props:{ticks:s[1],solid:!0,lineColor:"rgba(0,0,0,0.65)",formatTick:s[8],snapTicks:!0,dyTick:0,stagger:s[5],suffix:s[6]}}),n=new ki({}),{c(){te(e.$$.fragment),l=M(),te(t.$$.fragment),a=M(),te(n.$$.fragment)},l(o){ae(e.$$.fragment,o),l=L(o),ae(t.$$.fragment,o),a=L(o),ae(n.$$.fragment,o)},m(o,r){se(e,o,r),w(o,l,r),se(t,o,r),w(o,a,r),se(n,o,r),i=!0},p(o,r){const f={};r&2&&(f.ticks=o[1]),r&4&&(f.colors=o[2]),e.$set(f);const m={};r&2&&(m.ticks=o[1]),r&256&&(m.formatTick=o[8]),r&32&&(m.stagger=o[5]),r&64&&(m.suffix=o[6]),t.$set(m)},i(o){i||(j(e.$$.fragment,o),j(t.$$.fragment,o),j(n.$$.fragment,o),i=!0)},o(o){q(e.$$.fragment,o),q(t.$$.fragment,o),q(n.$$.fragment,o),i=!1},d(o){ne(e,o),o&&u(l),ne(t,o),o&&u(a),ne(n,o)}}}function bi(s){let e,l;return e=new Ya({props:{$$slots:{default:[vi]},$$scope:{ctx:s}}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a&1382&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function yi(s){let e,l,t;return l=new Xa({props:{padding:s[4],x:s[3],yDomain:[0,1],xDomain:[s[1][0],s[1][s[1].length-1]],xScale:s[7](),data:s[0],$$slots:{default:[bi]},$$scope:{ctx:s}}}),{c(){e=v("div"),te(l.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0,"aria-hidden":!0});var n=y(e);ae(l.$$.fragment,n),n.forEach(u),this.h()},h(){h(e,"class","chart-container svelte-4arupc"),h(e,"aria-hidden","true")},m(a,n){w(a,e,n),se(l,e,null),t=!0},p(a,[n]){const i={};n&16&&(i.padding=a[4]),n&8&&(i.x=a[3]),n&2&&(i.xDomain=[a[1][0],a[1][a[1].length-1]]),n&128&&(i.xScale=a[7]()),n&1&&(i.data=a[0]),n&1382&&(i.$$scope={dirty:n,ctx:a}),l.$set(i)},i(a){t||(j(l.$$.fragment,a),t=!0)},o(a){q(l.$$.fragment,a),t=!1},d(a){a&&u(e),ne(l)}}}function pi(s,e,l){let t,a,{data:n}=e,{ticks:i}=e,{colors:o=["lightgrey","grey","grey","lightgrey"]}=e,{key:r="x"}=e,{padding:f={top:0,bottom:20,left:2,right:2}}=e,{stagger:m=!1}=e,{scale:d="linear"}=e,{suffix:g=""}=e;return s.$$set=c=>{"data"in c&&l(0,n=c.data),"ticks"in c&&l(1,i=c.ticks),"colors"in c&&l(2,o=c.colors),"key"in c&&l(3,r=c.key),"padding"in c&&l(4,f=c.padding),"stagger"in c&&l(5,m=c.stagger),"scale"in c&&l(9,d=c.scale),"suffix"in c&&l(6,g=c.suffix)},s.$$.update=()=>{s.$$.dirty&2&&l(8,t=i[1]&&i[1]-i[0]<1?c=>c.toFixed(1):c=>c.toFixed(0)),s.$$.dirty&514&&l(7,a=d=="log"?dn:d=="sqrt"||i[1]&&i[1]-i[0]<.3?mn:gn)},[n,i,o,r,f,m,g,a,t,d]}class Ei extends pe{constructor(e){super();Ee(this,e,pi,yi,we,{data:0,ticks:1,colors:2,key:3,padding:4,stagger:5,scale:9,suffix:6})}}function Bs(s,e,l){const t=s.slice();return t[37]=e[l],t[39]=l,t}function Ms(s,e,l){const t=s.slice();return t[37]=e[l],t[39]=l,t}function Ls(s,e,l){const t=s.slice();return t[37]=e[l],t[39]=l,t}function js(s,e,l){const t=s.slice();return t[42]=e[l],t}function Fs(s,e,l){const t=s.slice();return t[45]=e[l],t[39]=l,t}function qs(s){let e,l=Oe(s[45].label)+"",t,a;return{c(){e=v("option"),t=K(l),this.h()},l(n){e=b(n,"OPTION",{});var i=y(e);t=D(i,l),i.forEach(u),this.h()},h(){e.__value=a=s[45],e.value=e.__value},m(n,i){w(n,e,i),_(e,t)},p(n,i){i[0]&4096&&l!==(l=Oe(n[45].label)+"")&&le(t,l),i[0]&4096&&a!==(a=n[45])&&(e.__value=a,e.value=e.__value)},d(n){n&&u(e)}}}function Rs(s){let e,l,t,a,n,i,o=s[4].cats,r=[];for(let f=0;f<o.length;f+=1)r[f]=Os(js(s,o,f));return{c(){e=v("select");for(let f=0;f<r.length;f+=1)r[f].c();l=M(),t=v("button"),a=K("Add"),this.h()},l(f){e=b(f,"SELECT",{class:!0});var m=y(e);for(let g=0;g<r.length;g+=1)r[g].l(m);m.forEach(u),l=L(f),t=b(f,"BUTTON",{class:!0});var d=y(t);a=D(d,"Add"),d.forEach(u),this.h()},h(){h(e,"class","svelte-1lk3l1m"),s[5][s[4].label]===void 0&&dt(()=>s[26].call(e)),h(t,"class","btn svelte-1lk3l1m")},m(f,m){w(f,e,m);for(let d=0;d<r.length;d+=1)r[d].m(e,null);gt(e,s[5][s[4].label]),w(f,l,m),w(f,t,m),_(t,a),n||(i=[kt(e,"change",s[26]),kt(t,"mouseup",s[27])],n=!0)},p(f,m){if(m[0]&16){o=f[4].cats;let d;for(d=0;d<o.length;d+=1){const g=js(f,o,d);r[d]?r[d].p(g,m):(r[d]=Os(g),r[d].c(),r[d].m(e,null))}for(;d<r.length;d+=1)r[d].d(1);r.length=o.length}m[0]&4144&&gt(e,f[5][f[4].label])},d(f){f&&u(e),Je(r,f),f&&u(l),f&&u(t),n=!1,yn(i)}}}function Os(s){let e,l,t=(s[42].indent?Array.from({length:s[42].indent-1},s[25]).join("")+as:"")+"",a=Oe(s[42].label)+"",n,i;return{c(){e=v("option"),l=new vn,n=K(a),this.h()},l(o){e=b(o,"OPTION",{});var r=y(e);l=bn(r),n=D(r,a),r.forEach(u),this.h()},h(){l.a=n,e.__value=i=s[42],e.value=e.__value},m(o,r){w(o,e,r),l.m(t,e),_(e,n)},p(o,r){r[0]&16&&t!==(t=(o[42].indent?Array.from({length:o[42].indent-1},o[25]).join("")+as:"")+"")&&l.p(t),r[0]&16&&a!==(a=Oe(o[42].label)+"")&&le(n,a),r[0]&4112&&i!==(i=o[42])&&(e.__value=i,e.value=e.__value)},d(o){o&&u(e)}}}function Gs(s){let e,l,t,a=s[1],n=[];for(let i=0;i<a.length;i+=1)n[i]=Ws(Ls(s,a,i));return{c(){e=v("br"),l=M();for(let i=0;i<n.length;i+=1)n[i].c();t=_e()},l(i){e=b(i,"BR",{}),l=L(i);for(let o=0;o<n.length;o+=1)n[o].l(i);t=_e()},m(i,o){w(i,e,o),w(i,l,o);for(let r=0;r<n.length;r+=1)n[r].m(i,o);w(i,t,o)},p(i,o){if(o[0]&17026){a=i[1];let r;for(r=0;r<a.length;r+=1){const f=Ls(i,a,r);n[r]?n[r].p(f,o):(n[r]=Ws(f),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},d(i){i&&u(e),i&&u(l),Je(n,i),i&&u(t)}}}function wi(s){let e,l,t=Oe(s[37].topic)+"",a,n,i=Oe(s[37].label)+"",o,r,f,m,d,g;function c(){return s[28](s[37])}return{c(){e=v("div"),l=v("span"),a=K(t),n=K(": "),o=K(i),r=M(),f=v("button"),m=M(),this.h()},l(k){e=b(k,"DIV",{class:!0});var p=y(e);l=b(p,"SPAN",{class:!0});var N=y(l);a=D(N,t),n=D(N,": "),o=D(N,i),N.forEach(u),r=L(p),f=b(p,"BUTTON",{class:!0}),y(f).forEach(u),m=L(p),p.forEach(u),this.h()},h(){h(l,"class","svelte-1lk3l1m"),h(f,"class","btn-pill svelte-1lk3l1m"),h(e,"class","chip svelte-1lk3l1m"),wl(e,"chip-inactive",s[39]>=s[9])},m(k,p){w(k,e,p),_(e,l),_(l,a),_(l,n),_(l,o),_(e,r),_(e,f),_(e,m),d||(g=kt(f,"click",c),d=!0)},p(k,p){s=k,p[0]&2&&t!==(t=Oe(s[37].topic)+"")&&le(a,t),p[0]&2&&i!==(i=Oe(s[37].label)+"")&&le(o,i),p[0]&512&&wl(e,"chip-inactive",s[39]>=s[9])},d(k){k&&u(e),d=!1,g()}}}function Si(s){let e,l,t=Oe(s[37].topic)+"",a,n,i=Oe(s[37].label)+"",o,r,f,m;return{c(){e=v("div"),l=v("span"),a=K(t),n=K(": "),o=K(i),r=M(),f=v("div"),m=M(),this.h()},l(d){e=b(d,"DIV",{class:!0});var g=y(e);l=b(g,"SPAN",{class:!0});var c=y(l);a=D(c,t),n=D(c,": "),o=D(c,i),c.forEach(u),r=L(g),f=b(g,"DIV",{class:!0}),y(f).forEach(u),m=L(g),g.forEach(u),this.h()},h(){h(l,"class","svelte-1lk3l1m"),h(f,"class","loader svelte-1lk3l1m"),h(e,"class","chip chip-pending svelte-1lk3l1m")},m(d,g){w(d,e,g),_(e,l),_(l,a),_(l,n),_(l,o),_(e,r),_(e,f),_(e,m)},p(d,g){g[0]&2&&t!==(t=Oe(d[37].topic)+"")&&le(a,t),g[0]&2&&i!==(i=Oe(d[37].label)+"")&&le(o,i)},d(d){d&&u(e)}}}function Ws(s){let e;function l(n,i){return n[7]=="loading"&&n[39]==n[1].length-1?Si:wi}let t=l(s),a=t(s);return{c(){a.c(),e=_e()},l(n){a.l(n),e=_e()},m(n,i){a.m(n,i),w(n,e,i)},p(n,i){t===(t=l(n))&&a?a.p(n,i):(a.d(1),a=t(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){a.d(n),n&&u(e)}}}function Hs(s){let e,l,t,a=s[7]=="failed"&&Us(),n=s[8]==!0&&Zs();return{c(){e=v("div"),l=K(`Some datasets not available for selected variables.
    `),a&&a.c(),t=M(),n&&n.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=y(e);l=D(o,`Some datasets not available for selected variables.
    `),a&&a.l(o),t=L(o),n&&n.l(o),o.forEach(u),this.h()},h(){h(e,"class","warning svelte-1lk3l1m")},m(i,o){w(i,e,o),_(e,l),a&&a.m(e,null),_(e,t),n&&n.m(e,null)},p(i,o){i[7]=="failed"?a||(a=Us(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),i[8]==!0?n||(n=Zs(),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(i){i&&u(e),a&&a.d(),n&&n.d()}}}function Us(s){let e;return{c(){e=K("Try removing a variable to see more datasets.")},l(l){e=D(l,"Try removing a variable to see more datasets.")},m(l,t){w(l,e,t)},d(l){l&&u(e)}}}function Zs(s){let e;return{c(){e=K("Economic indicators (employment, social status etc) not available for ages 0 to 15.")},l(l){e=D(l,"Economic indicators (employment, social status etc) not available for ages 0 to 15.")},m(l,t){w(l,e,t)},d(l){l&&u(e)}}}function Js(s){let e,l,t,a,n,i,o,r,f,m,d,g,c,k,p,N,A,I,F,R,B,P,x,fe,$,X,Z,T,W,ie,C,S,G,U,me,ge,V,ue,Qe,O,J,re,ee,Q,ke,cl,Xe,ye,oe,Ge,Al,hl,vt,bt,Sl,Kl,yt,pt,xe,Dl,Et,wt,St,tt,Ce,Ae,zt,$e,Tl,Ct,At,Kt,at,Ke,De,Dt,el,Pl,Tt,Pt,Nt,st,Te,Pe,It,ll,Nl,Vt,Bt,Mt,nt,Ne,Ie,Lt,tl,Il,jt,Ft,qt,it,Ve,Be,Rt,al,Vl,Ot,Gt,Wt,ot,Me,Le,Ht,sl,Bl,Ut,Zt,Jt,rt,je,Fe,Xt,nl,Ml,Yt,Qt,xt,ft,qe,Re,ra,_l;function fa(z,E){return z[11].selected==0?Ci:zi}let ut=fa(s),We=ut(s);function ua(z,E){return E[0]&1024&&(A=null),A==null&&(A=!!Ye(z[10].selected.residents.age.values)),A?Ki:Ai}let ct=ua(s,[-1,-1]),He=ct(s);const ca=[Ti,Di],dl=[];function ha(z,E){return E[0]&1024&&(fe=null),fe==null&&(fe=!!Ye(z[10].selected.residents.age.values)),fe?0:1}$=ha(s,[-1,-1]),X=dl[$]=ca[$](s);function nn(z){s[30](z)}let _a={style:zn,$$slots:{default:[Ni]},$$scope:{ctx:s}};s[3]!==void 0&&(_a.map=s[3]),G=new oi({props:_a}),sa.push(()=>ls(G,"map",nn));let he=s[10].geoBreaks&&s[10].geoPerc&&xs(s);function da(z,E){return z[10].geoPerc&&z[1][0]?Vi:Ii}let ht=da(s),Ue=ht(s);function ma(z,E){return z[10].geoPerc&&z[1][0]?Mi:Bi}let _t=ma(s),Ze=_t(s);const ga=[ji,Li],ml=[];function ka(z,E){return E[0]&1024&&(tt=null),tt==null&&(tt=!!Ye(z[10].selected.residents.health.values)),tt?0:1}Ce=ka(s,[-1,-1]),Ae=ml[Ce]=ga[Ce](s);const va=[qi,Fi],gl=[];function ba(z,E){return E[0]&1024&&(at=null),at==null&&(at=!!Ye(z[10].selected.residents.marital.values)),at?0:1}Ke=ba(s,[-1,-1]),De=gl[Ke]=va[Ke](s);const ya=[Oi,Ri],kl=[];function pa(z,E){return E[0]&1024&&(st=null),st==null&&(st=!!Ye(z[10].selected.residents.grade.values)),st?0:1}Te=pa(s,[-1,-1]),Pe=kl[Te]=ya[Te](s);const Ea=[Wi,Gi],vl=[];function wa(z,E){return E[0]&1024&&(nt=null),nt==null&&(nt=!!Ye(z[10].selected.residents.economic.values)),nt?0:1}Ne=wa(s,[-1,-1]),Ie=vl[Ne]=Ea[Ne](s);const Sa=[Ui,Hi],bl=[];function za(z,E){return E[0]&1024&&(it=null),it==null&&(it=!!Ye(z[10].selected.residents.distance.values)),it?0:1}Ve=za(s,[-1,-1]),Be=bl[Ve]=Sa[Ve](s);const Ca=[Ji,Zi],yl=[];function Aa(z,E){return E[0]&1024&&(ot=null),ot==null&&(ot=!!Ye(z[10].selected.residents.travel.values)),ot?0:1}Me=Aa(s,[-1,-1]),Le=yl[Me]=Ca[Me](s);const Ka=[Yi,Xi],pl=[];function Da(z,E){return E[0]&1024&&(rt=null),rt==null&&(rt=!!Ye(z[10].selected.households.housing.values)),rt?0:1}je=Da(s,[-1,-1]),Fe=pl[je]=Ka[je](s);const Ta=[xi,Qi],El=[];function Pa(z,E){return E[0]&1024&&(ft=null),ft==null&&(ft=!!Ye(z[10].selected.households.tenure.values)),ft?0:1}return qe=Pa(s,[-1,-1]),Re=El[qe]=Ta[qe](s),{c(){e=v("div"),l=v("div"),t=v("h3"),a=K("Demographics"),n=M(),i=v("div"),o=v("span"),r=K("Population"),f=v("br"),m=M(),We.c(),d=M(),g=v("div"),c=v("span"),k=K("Median Age"),p=v("br"),N=M(),He.c(),I=M(),F=v("div"),R=v("span"),B=K("Age profile"),P=v("br"),x=M(),X.c(),Z=M(),T=v("div"),W=v("h3"),ie=K("Population by area"),C=M(),S=v("div"),te(G.$$.fragment),me=M(),ge=v("div"),V=v("span"),ue=K("% of population by local authority"),Qe=v("br"),O=M(),J=v("div"),he&&he.c(),re=M(),ee=v("div"),Q=v("span"),ke=K("Areas with highest %"),cl=v("br"),Xe=M(),Ue.c(),ye=M(),oe=v("div"),Ge=v("span"),Al=K("Areas with lowest %"),hl=v("br"),vt=M(),Ze.c(),bt=M(),Sl=v("div"),Kl=v("h3"),yt=K("Key indicators"),pt=M(),xe=v("div"),Dl=v("span"),Et=K("General health"),wt=v("br"),St=M(),Ae.c(),zt=M(),$e=v("div"),Tl=v("span"),Ct=K("Marital status"),At=v("br"),Kt=M(),De.c(),Dt=M(),el=v("div"),Pl=v("span"),Tt=K("Social grade"),Pt=v("br"),Nt=M(),Pe.c(),It=M(),ll=v("div"),Nl=v("span"),Vt=K("Economic activity"),Bt=v("br"),Mt=M(),Ie.c(),Lt=M(),tl=v("div"),Il=v("span"),jt=K("Distance to work (km)"),Ft=v("br"),qt=M(),Be.c(),Rt=M(),al=v("div"),Vl=v("span"),Ot=K("Mode of travel to work"),Gt=v("br"),Wt=M(),Le.c(),Ht=M(),sl=v("div"),Bl=v("span"),Ut=K("Type of housing"),Zt=v("br"),Jt=M(),Fe.c(),Xt=M(),nl=v("div"),Ml=v("span"),Yt=K("Tenure of housing"),Qt=v("br"),xt=M(),Re.c(),this.h()},l(z){e=b(z,"DIV",{id:!0,class:!0});var E=y(e);l=b(E,"DIV",{style:!0});var Ll=y(l);t=b(Ll,"H3",{class:!0});var jl=y(t);a=D(jl,"Demographics"),jl.forEach(u),Ll.forEach(u),n=L(E),i=b(E,"DIV",{});var il=y(i);o=b(il,"SPAN",{class:!0});var Fl=y(o);r=D(Fl,"Population"),Fl.forEach(u),f=b(il,"BR",{}),m=L(il),We.l(il),il.forEach(u),d=L(E),g=b(E,"DIV",{});var ol=y(g);c=b(ol,"SPAN",{class:!0});var ql=y(c);k=D(ql,"Median Age"),ql.forEach(u),p=b(ol,"BR",{}),N=L(ol),He.l(ol),ol.forEach(u),I=L(E),F=b(E,"DIV",{});var rl=y(F);R=b(rl,"SPAN",{class:!0});var Rl=y(R);B=D(Rl,"Age profile"),Rl.forEach(u),P=b(rl,"BR",{}),x=L(rl),X.l(rl),rl.forEach(u),Z=L(E),T=b(E,"DIV",{style:!0});var Ol=y(T);W=b(Ol,"H3",{class:!0});var Gl=y(W);ie=D(Gl,"Population by area"),Gl.forEach(u),Ol.forEach(u),C=L(E),S=b(E,"DIV",{id:!0,style:!0,class:!0});var Na=y(S);ae(G.$$.fragment,Na),Na.forEach(u),me=L(E),ge=b(E,"DIV",{});var Wl=y(ge);V=b(Wl,"SPAN",{class:!0});var Ia=y(V);ue=D(Ia,"% of population by local authority"),Ia.forEach(u),Qe=b(Wl,"BR",{}),O=L(Wl),J=b(Wl,"DIV",{class:!0,style:!0});var Va=y(J);he&&he.l(Va),Va.forEach(u),Wl.forEach(u),re=L(E),ee=b(E,"DIV",{});var Hl=y(ee);Q=b(Hl,"SPAN",{class:!0});var Ba=y(Q);ke=D(Ba,"Areas with highest %"),Ba.forEach(u),cl=b(Hl,"BR",{}),Xe=L(Hl),Ue.l(Hl),Hl.forEach(u),ye=L(E),oe=b(E,"DIV",{});var Ul=y(oe);Ge=b(Ul,"SPAN",{class:!0});var Ma=y(Ge);Al=D(Ma,"Areas with lowest %"),Ma.forEach(u),hl=b(Ul,"BR",{}),vt=L(Ul),Ze.l(Ul),Ul.forEach(u),bt=L(E),Sl=b(E,"DIV",{style:!0});var La=y(Sl);Kl=b(La,"H3",{class:!0});var ja=y(Kl);yt=D(ja,"Key indicators"),ja.forEach(u),La.forEach(u),pt=L(E),xe=b(E,"DIV",{});var Zl=y(xe);Dl=b(Zl,"SPAN",{class:!0});var Fa=y(Dl);Et=D(Fa,"General health"),Fa.forEach(u),wt=b(Zl,"BR",{}),St=L(Zl),Ae.l(Zl),Zl.forEach(u),zt=L(E),$e=b(E,"DIV",{});var Jl=y($e);Tl=b(Jl,"SPAN",{class:!0});var qa=y(Tl);Ct=D(qa,"Marital status"),qa.forEach(u),At=b(Jl,"BR",{}),Kt=L(Jl),De.l(Jl),Jl.forEach(u),Dt=L(E),el=b(E,"DIV",{});var Xl=y(el);Pl=b(Xl,"SPAN",{class:!0});var Ra=y(Pl);Tt=D(Ra,"Social grade"),Ra.forEach(u),Pt=b(Xl,"BR",{}),Nt=L(Xl),Pe.l(Xl),Xl.forEach(u),It=L(E),ll=b(E,"DIV",{});var Yl=y(ll);Nl=b(Yl,"SPAN",{class:!0});var Oa=y(Nl);Vt=D(Oa,"Economic activity"),Oa.forEach(u),Bt=b(Yl,"BR",{}),Mt=L(Yl),Ie.l(Yl),Yl.forEach(u),Lt=L(E),tl=b(E,"DIV",{});var Ql=y(tl);Il=b(Ql,"SPAN",{class:!0});var Ga=y(Il);jt=D(Ga,"Distance to work (km)"),Ga.forEach(u),Ft=b(Ql,"BR",{}),qt=L(Ql),Be.l(Ql),Ql.forEach(u),Rt=L(E),al=b(E,"DIV",{});var xl=y(al);Vl=b(xl,"SPAN",{class:!0});var Wa=y(Vl);Ot=D(Wa,"Mode of travel to work"),Wa.forEach(u),Gt=b(xl,"BR",{}),Wt=L(xl),Le.l(xl),xl.forEach(u),Ht=L(E),sl=b(E,"DIV",{});var $l=y(sl);Bl=b($l,"SPAN",{class:!0});var Ha=y(Bl);Ut=D(Ha,"Type of housing"),Ha.forEach(u),Zt=b($l,"BR",{}),Jt=L($l),Fe.l($l),$l.forEach(u),Xt=L(E),nl=b(E,"DIV",{});var et=y(nl);Ml=b(et,"SPAN",{class:!0});var Ua=y(Ml);Yt=D(Ua,"Tenure of housing"),Ua.forEach(u),Qt=b(et,"BR",{}),xt=L(et),Re.l(et),et.forEach(u),E.forEach(u),this.h()},h(){h(t,"class","svelte-1lk3l1m"),Y(l,"grid-column","span "+s[2]),h(o,"class","text-label svelte-1lk3l1m"),h(c,"class","text-label svelte-1lk3l1m"),h(R,"class","text-label svelte-1lk3l1m"),h(W,"class","svelte-1lk3l1m"),Y(T,"grid-column","span "+s[2]),h(S,"id","map"),Y(S,"grid-column","span "+(s[2]>=2?2:1)),h(S,"class","svelte-1lk3l1m"),h(V,"class","text-label svelte-1lk3l1m"),h(J,"class","chart svelte-1lk3l1m"),Y(J,"height","40px"),h(Q,"class","text-label svelte-1lk3l1m"),h(Ge,"class","text-label svelte-1lk3l1m"),h(Kl,"class","svelte-1lk3l1m"),Y(Sl,"grid-column","span "+s[2]),h(Dl,"class","text-label svelte-1lk3l1m"),h(Tl,"class","text-label svelte-1lk3l1m"),h(Pl,"class","text-label svelte-1lk3l1m"),h(Nl,"class","text-label svelte-1lk3l1m"),h(Il,"class","text-label svelte-1lk3l1m"),h(Vl,"class","text-label svelte-1lk3l1m"),h(Bl,"class","text-label svelte-1lk3l1m"),h(Ml,"class","text-label svelte-1lk3l1m"),h(e,"id","grid"),h(e,"class","grid mt svelte-1lk3l1m"),dt(()=>s[33].call(e))},m(z,E){w(z,e,E),_(e,l),_(l,t),_(t,a),_(e,n),_(e,i),_(i,o),_(o,r),_(i,f),_(i,m),We.m(i,null),_(e,d),_(e,g),_(g,c),_(c,k),_(g,p),_(g,N),He.m(g,null),_(e,I),_(e,F),_(F,R),_(R,B),_(F,P),_(F,x),dl[$].m(F,null),_(e,Z),_(e,T),_(T,W),_(W,ie),_(e,C),_(e,S),se(G,S,null),_(e,me),_(e,ge),_(ge,V),_(V,ue),_(ge,Qe),_(ge,O),_(ge,J),he&&he.m(J,null),_(e,re),_(e,ee),_(ee,Q),_(Q,ke),_(ee,cl),_(ee,Xe),Ue.m(ee,null),_(e,ye),_(e,oe),_(oe,Ge),_(Ge,Al),_(oe,hl),_(oe,vt),Ze.m(oe,null),_(e,bt),_(e,Sl),_(Sl,Kl),_(Kl,yt),_(e,pt),_(e,xe),_(xe,Dl),_(Dl,Et),_(xe,wt),_(xe,St),ml[Ce].m(xe,null),_(e,zt),_(e,$e),_($e,Tl),_(Tl,Ct),_($e,At),_($e,Kt),gl[Ke].m($e,null),_(e,Dt),_(e,el),_(el,Pl),_(Pl,Tt),_(el,Pt),_(el,Nt),kl[Te].m(el,null),_(e,It),_(e,ll),_(ll,Nl),_(Nl,Vt),_(ll,Bt),_(ll,Mt),vl[Ne].m(ll,null),_(e,Lt),_(e,tl),_(tl,Il),_(Il,jt),_(tl,Ft),_(tl,qt),bl[Ve].m(tl,null),_(e,Rt),_(e,al),_(al,Vl),_(Vl,Ot),_(al,Gt),_(al,Wt),yl[Me].m(al,null),_(e,Ht),_(e,sl),_(sl,Bl),_(Bl,Ut),_(sl,Zt),_(sl,Jt),pl[je].m(sl,null),_(e,Xt),_(e,nl),_(nl,Ml),_(Ml,Yt),_(nl,Qt),_(nl,xt),El[qe].m(nl,null),ra=xa(e,s[33].bind(e)),_l=!0},p(z,E){(!_l||E[0]&4)&&Y(l,"grid-column","span "+z[2]),ut===(ut=fa(z))&&We?We.p(z,E):(We.d(1),We=ut(z),We&&(We.c(),We.m(i,null))),ct===(ct=ua(z,E))&&He?He.p(z,E):(He.d(1),He=ct(z),He&&(He.c(),He.m(g,null)));let Ll=$;$=ha(z,E),$===Ll?dl[$].p(z,E):(ve(),q(dl[Ll],1,1,()=>{dl[Ll]=null}),be(),X=dl[$],X?X.p(z,E):(X=dl[$]=ca[$](z),X.c()),j(X,1),X.m(F,null)),(!_l||E[0]&4)&&Y(T,"grid-column","span "+z[2]);const jl={};E[0]&1088|E[1]&65536&&(jl.$$scope={dirty:E,ctx:z}),!U&&E[0]&8&&(U=!0,jl.map=z[3],$a(()=>U=!1)),G.$set(jl),(!_l||E[0]&4)&&Y(S,"grid-column","span "+(z[2]>=2?2:1)),z[10].geoBreaks&&z[10].geoPerc?he?(he.p(z,E),E[0]&1024&&j(he,1)):(he=xs(z),he.c(),j(he,1),he.m(J,null)):he&&(ve(),q(he,1,1,()=>{he=null}),be()),ht===(ht=da(z))&&Ue?Ue.p(z,E):(Ue.d(1),Ue=ht(z),Ue&&(Ue.c(),Ue.m(ee,null))),_t===(_t=ma(z))&&Ze?Ze.p(z,E):(Ze.d(1),Ze=_t(z),Ze&&(Ze.c(),Ze.m(oe,null))),(!_l||E[0]&4)&&Y(Sl,"grid-column","span "+z[2]);let il=Ce;Ce=ka(z,E),Ce===il?ml[Ce].p(z,E):(ve(),q(ml[il],1,1,()=>{ml[il]=null}),be(),Ae=ml[Ce],Ae?Ae.p(z,E):(Ae=ml[Ce]=ga[Ce](z),Ae.c()),j(Ae,1),Ae.m(xe,null));let Fl=Ke;Ke=ba(z,E),Ke===Fl?gl[Ke].p(z,E):(ve(),q(gl[Fl],1,1,()=>{gl[Fl]=null}),be(),De=gl[Ke],De?De.p(z,E):(De=gl[Ke]=va[Ke](z),De.c()),j(De,1),De.m($e,null));let ol=Te;Te=pa(z,E),Te===ol?kl[Te].p(z,E):(ve(),q(kl[ol],1,1,()=>{kl[ol]=null}),be(),Pe=kl[Te],Pe?Pe.p(z,E):(Pe=kl[Te]=ya[Te](z),Pe.c()),j(Pe,1),Pe.m(el,null));let ql=Ne;Ne=wa(z,E),Ne===ql?vl[Ne].p(z,E):(ve(),q(vl[ql],1,1,()=>{vl[ql]=null}),be(),Ie=vl[Ne],Ie?Ie.p(z,E):(Ie=vl[Ne]=Ea[Ne](z),Ie.c()),j(Ie,1),Ie.m(ll,null));let rl=Ve;Ve=za(z,E),Ve===rl?bl[Ve].p(z,E):(ve(),q(bl[rl],1,1,()=>{bl[rl]=null}),be(),Be=bl[Ve],Be?Be.p(z,E):(Be=bl[Ve]=Sa[Ve](z),Be.c()),j(Be,1),Be.m(tl,null));let Rl=Me;Me=Aa(z,E),Me===Rl?yl[Me].p(z,E):(ve(),q(yl[Rl],1,1,()=>{yl[Rl]=null}),be(),Le=yl[Me],Le?Le.p(z,E):(Le=yl[Me]=Ca[Me](z),Le.c()),j(Le,1),Le.m(al,null));let Ol=je;je=Da(z,E),je===Ol?pl[je].p(z,E):(ve(),q(pl[Ol],1,1,()=>{pl[Ol]=null}),be(),Fe=pl[je],Fe?Fe.p(z,E):(Fe=pl[je]=Ka[je](z),Fe.c()),j(Fe,1),Fe.m(sl,null));let Gl=qe;qe=Pa(z,E),qe===Gl?El[qe].p(z,E):(ve(),q(El[Gl],1,1,()=>{El[Gl]=null}),be(),Re=El[qe],Re?Re.p(z,E):(Re=El[qe]=Ta[qe](z),Re.c()),j(Re,1),Re.m(nl,null))},i(z){_l||(j(X),j(G.$$.fragment,z),j(he),j(Ae),j(De),j(Pe),j(Ie),j(Be),j(Le),j(Fe),j(Re),_l=!0)},o(z){q(X),q(G.$$.fragment,z),q(he),q(Ae),q(De),q(Pe),q(Ie),q(Be),q(Le),q(Fe),q(Re),_l=!1},d(z){z&&u(e),We.d(),He.d(),dl[$].d(),ne(G),he&&he.d(),Ue.d(),Ze.d(),ml[Ce].d(),gl[Ke].d(),kl[Te].d(),vl[Ne].d(),bl[Ve].d(),yl[Me].d(),pl[je].d(),El[qe].d(),ra()}}}function zi(s){let e,l=(Math.round(s[11].selected/s[11].all*100)>0?Math.round(s[11].selected/s[11].all*100):"<1")+"",t,a,n,i,o,r,f,m,d,g=s[11].selected.toLocaleString()+"",c,k,p=s[11].all.toLocaleString()+"",N,A;return{c(){e=v("span"),t=K(l),a=K("%"),n=M(),i=v("span"),o=K("of people in"),r=v("br"),f=K("England and Wales"),m=M(),d=v("div"),c=K(g),k=K(" of "),N=K(p),A=K(" people"),this.h()},l(I){e=b(I,"SPAN",{class:!0});var F=y(e);t=D(F,l),a=D(F,"%"),F.forEach(u),n=L(I),i=b(I,"SPAN",{class:!0});var R=y(i);o=D(R,"of people in"),r=b(R,"BR",{}),f=D(R,"England and Wales"),R.forEach(u),m=L(I),d=b(I,"DIV",{class:!0});var B=y(d);c=D(B,g),k=D(B," of "),N=D(B,p),A=D(B," people"),B.forEach(u),this.h()},h(){h(e,"class","inline text-big svelte-1lk3l1m"),h(i,"class","inline condensed text-small svelte-1lk3l1m"),h(d,"class","text-small muted svelte-1lk3l1m")},m(I,F){w(I,e,F),_(e,t),_(e,a),w(I,n,F),w(I,i,F),_(i,o),_(i,r),_(i,f),w(I,m,F),w(I,d,F),_(d,c),_(d,k),_(d,N),_(d,A)},p(I,F){F[0]&2048&&l!==(l=(Math.round(I[11].selected/I[11].all*100)>0?Math.round(I[11].selected/I[11].all*100):"<1")+"")&&le(t,l),F[0]&2048&&g!==(g=I[11].selected.toLocaleString()+"")&&le(c,g),F[0]&2048&&p!==(p=I[11].all.toLocaleString()+"")&&le(N,p)},d(I){I&&u(e),I&&u(n),I&&u(i),I&&u(m),I&&u(d)}}}function Ci(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,d(a){a&&u(e)}}}function Ai(s){let e,l=s[16](s[10].selected)+"",t,a,n,i,o,r,f=s[11].all!=s[11].selected&&Xs(s);return{c(){e=v("span"),t=K(l),a=M(),n=v("span"),i=K("years"),o=M(),f&&f.c(),r=_e(),this.h()},l(m){e=b(m,"SPAN",{class:!0});var d=y(e);t=D(d,l),d.forEach(u),a=L(m),n=b(m,"SPAN",{class:!0});var g=y(n);i=D(g,"years"),g.forEach(u),o=L(m),f&&f.l(m),r=_e(),this.h()},h(){h(e,"class","inline text-big svelte-1lk3l1m"),h(n,"class","inline text-small svelte-1lk3l1m")},m(m,d){w(m,e,d),_(e,t),w(m,a,d),w(m,n,d),_(n,i),w(m,o,d),f&&f.m(m,d),w(m,r,d)},p(m,d){d[0]&1024&&l!==(l=m[16](m[10].selected)+"")&&le(t,l),m[11].all!=m[11].selected?f?f.p(m,d):(f=Xs(m),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null)},d(m){m&&u(e),m&&u(a),m&&u(n),m&&u(o),f&&f.d(m),m&&u(r)}}}function Ki(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,d(a){a&&u(e)}}}function Xs(s){let e,l,t=s[16](s[10].all)+"",a,n;return{c(){e=v("div"),l=K("vs "),a=K(t),n=K(" years for whole population"),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=y(e);l=D(o,"vs "),a=D(o,t),n=D(o," years for whole population"),o.forEach(u),this.h()},h(){h(e,"class","text-small muted svelte-1lk3l1m")},m(i,o){w(i,e,o),_(e,l),_(e,a),_(e,n)},p(i,o){o[0]&1024&&t!==(t=i[16](i[10].all)+"")&&le(a,t)},d(i){i&&u(e)}}}function Di(s){let e,l,t,a,n;l=new bs({props:{data:s[10].selected&&s[15](["residents","age"]),zKey:s[11].all!=s[11].selected?"z":null}});let i=s[11].all!=s[11].selected&&Ys();return{c(){e=v("div"),te(l.$$.fragment),t=M(),i&&i.c(),a=_e(),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0});var r=y(e);ae(l.$$.fragment,r),r.forEach(u),t=L(o),i&&i.l(o),a=_e(),this.h()},h(){h(e,"class","chart svelte-1lk3l1m"),Y(e,"height","100px")},m(o,r){w(o,e,r),se(l,e,null),w(o,t,r),i&&i.m(o,r),w(o,a,r),n=!0},p(o,r){const f={};r[0]&1024&&(f.data=o[10].selected&&o[15](["residents","age"])),r[0]&2048&&(f.zKey=o[11].all!=o[11].selected?"z":null),l.$set(f),o[11].all!=o[11].selected?i?i.p(o,r):(i=Ys(),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},i(o){n||(j(l.$$.fragment,o),n=!0)},o(o){q(l.$$.fragment,o),n=!1},d(o){o&&u(e),ne(l),o&&u(t),i&&i.d(o),o&&u(a)}}}function Ti(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Ys(s){let e,l,t,a=de.comparison+"",n;return{c(){e=v("div"),l=v("li"),t=M(),n=K(a),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=y(e);l=b(o,"LI",{class:!0}),y(l).forEach(u),t=L(o),n=D(o,a),o.forEach(u),this.h()},h(){h(l,"class","line svelte-1lk3l1m"),h(e,"class","text-small muted svelte-1lk3l1m")},m(i,o){w(i,e,o),_(e,l),_(e,t),_(e,n)},p:H,d(i){i&&u(e)}}}function Qs(s){let e,l;return e=new ui({props:{id:"lad",type:"geojson",data:s[10].geojson,promoteId:lt.code,$$slots:{default:[Pi]},$$scope:{ctx:s}}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].geojson),a[0]&1088|a[1]&65536&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Pi(s){let e,l,t,a,n;function i(r){s[29](r)}let o={id:"lad-fill",data:s[10].geoPerc,geoCode:"code",nameCode:"name",colorCode:"color",valueCode:"value",hover:!0,tooltip:!0,type:"fill",paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":.8},order:"highway_name_other"};return s[6]!==void 0&&(o.hovered=s[6]),e=new Ts({props:o}),sa.push(()=>ls(e,"hovered",i)),a=new Ts({props:{id:"lad-line",type:"line",paint:{"line-color":"orange","line-width":2,"line-opacity":["case",["==",["feature-state","hovered"],!0],1,0]},order:"highway_name_other"}}),{c(){te(e.$$.fragment),t=M(),te(a.$$.fragment)},l(r){ae(e.$$.fragment,r),t=L(r),ae(a.$$.fragment,r)},m(r,f){se(e,r,f),w(r,t,f),se(a,r,f),n=!0},p(r,f){const m={};f[0]&1024&&(m.data=r[10].geoPerc),!l&&f[0]&64&&(l=!0,m.hovered=r[6],$a(()=>l=!1)),e.$set(m)},i(r){n||(j(e.$$.fragment,r),j(a.$$.fragment,r),n=!0)},o(r){q(e.$$.fragment,r),q(a.$$.fragment,r),n=!1},d(r){ne(e,r),r&&u(t),ne(a,r)}}}function Ni(s){let e,l,t=s[10].geojson&&s[10].geoPerc&&Qs(s);return{c(){t&&t.c(),e=_e()},l(a){t&&t.l(a),e=_e()},m(a,n){t&&t.m(a,n),w(a,e,n),l=!0},p(a,n){a[10].geojson&&a[10].geoPerc?t?(t.p(a,n),n[0]&1024&&j(t,1)):(t=Qs(a),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(ve(),q(t,1,1,()=>{t=null}),be())},i(a){l||(j(t),l=!0)},o(a){q(t),l=!1},d(a){t&&t.d(a),a&&u(e)}}}function xs(s){let e,l;return e=new Ei({props:{ticks:s[10].geoBreaks,data:s[6]&&s[10].geoPerc.find(s[31])?[{x:s[10].geoPerc.find(s[32]).value}]:[],colors:s[10].geoBreaks[1]==100?[ul.seq[4]]:ul.seq}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.ticks=t[10].geoBreaks),a[0]&1088&&(n.data=t[6]&&t[10].geoPerc.find(t[31])?[{x:t[10].geoPerc.find(t[32]).value}]:[]),a[0]&1024&&(n.colors=t[10].geoBreaks[1]==100?[ul.seq[4]]:ul.seq),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Ii(s){let e,l;return{c(){e=v("span"),l=K("Make a selection to see ranking."),this.h()},l(t){e=b(t,"SPAN",{class:!0});var a=y(e);l=D(a,"Make a selection to see ranking."),a.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(t,a){w(t,e,a),_(e,l)},p:H,d(t){t&&u(e)}}}function Vi(s){let e,l,t=[...s[10].geoPerc].sort(tn).slice(0,5),a=[];for(let n=0;n<t.length;n+=1)a[n]=$s(Ms(s,t,n));return{c(){e=v("table"),l=v("tbody");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=b(n,"TABLE",{class:!0});var i=y(e);l=b(i,"TBODY",{});var o=y(l);for(let r=0;r<a.length;r+=1)a[r].l(o);o.forEach(u),i.forEach(u),this.h()},h(){h(e,"class","table-rank text-small svelte-1lk3l1m")},m(n,i){w(n,e,i),_(e,l);for(let o=0;o<a.length;o+=1)a[o].m(l,null)},p(n,i){if(i[0]&1024){t=[...n[10].geoPerc].sort(tn).slice(0,5);let o;for(o=0;o<t.length;o+=1){const r=Ms(n,t,o);a[o]?a[o].p(r,i):(a[o]=$s(r),a[o].c(),a[o].m(l,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(n){n&&u(e),Je(a,n)}}}function $s(s){let e,l,t=s[39]+1+"",a,n,i,o,r=s[37].name+"",f,m,d,g=s[37].value.toFixed(1)+"",c,k,p;return{c(){e=v("tr"),l=v("td"),a=K(t),n=K("."),i=M(),o=v("td"),f=K(r),m=M(),d=v("td"),c=K(g),k=K("%"),p=M(),this.h()},l(N){e=b(N,"TR",{});var A=y(e);l=b(A,"TD",{class:!0});var I=y(l);a=D(I,t),n=D(I,"."),I.forEach(u),i=L(A),o=b(A,"TD",{});var F=y(o);f=D(F,r),F.forEach(u),m=L(A),d=b(A,"TD",{class:!0});var R=y(d);c=D(R,g),k=D(R,"%"),R.forEach(u),p=L(A),A.forEach(u),this.h()},h(){h(l,"class","w30 svelte-1lk3l1m"),h(d,"class","text-right svelte-1lk3l1m")},m(N,A){w(N,e,A),_(e,l),_(l,a),_(l,n),_(e,i),_(e,o),_(o,f),_(e,m),_(e,d),_(d,c),_(d,k),_(e,p)},p(N,A){A[0]&1024&&r!==(r=N[37].name+"")&&le(f,r),A[0]&1024&&g!==(g=N[37].value.toFixed(1)+"")&&le(c,g)},d(N){N&&u(e)}}}function Bi(s){let e,l;return{c(){e=v("span"),l=K("Make a selection to see ranking."),this.h()},l(t){e=b(t,"SPAN",{class:!0});var a=y(e);l=D(a,"Make a selection to see ranking."),a.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(t,a){w(t,e,a),_(e,l)},p:H,d(t){t&&u(e)}}}function Mi(s){let e,l,t=s[10].geoPerc.filter(an).sort(sn).slice(-5),a=[];for(let n=0;n<t.length;n+=1)a[n]=en(Bs(s,t,n));return{c(){e=v("table"),l=v("tbody");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=b(n,"TABLE",{class:!0});var i=y(e);l=b(i,"TBODY",{});var o=y(l);for(let r=0;r<a.length;r+=1)a[r].l(o);o.forEach(u),i.forEach(u),this.h()},h(){h(e,"class","table-rank text-small svelte-1lk3l1m")},m(n,i){w(n,e,i),_(e,l);for(let o=0;o<a.length;o+=1)a[o].m(l,null)},p(n,i){if(i[0]&1024){t=n[10].geoPerc.filter(an).sort(sn).slice(-5);let o;for(o=0;o<t.length;o+=1){const r=Bs(n,t,o);a[o]?a[o].p(r,i):(a[o]=en(r),a[o].c(),a[o].m(l,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(n){n&&u(e),Je(a,n)}}}function en(s){let e,l,t=s[10].geoPerc.length+s[39]-4+"",a,n,i,o,r=s[37].name+"",f,m,d,g=s[37].value.toFixed(1)+"",c,k,p;return{c(){e=v("tr"),l=v("td"),a=K(t),n=K("."),i=M(),o=v("td"),f=K(r),m=M(),d=v("td"),c=K(g),k=K("%"),p=M(),this.h()},l(N){e=b(N,"TR",{});var A=y(e);l=b(A,"TD",{class:!0});var I=y(l);a=D(I,t),n=D(I,"."),I.forEach(u),i=L(A),o=b(A,"TD",{});var F=y(o);f=D(F,r),F.forEach(u),m=L(A),d=b(A,"TD",{class:!0});var R=y(d);c=D(R,g),k=D(R,"%"),R.forEach(u),p=L(A),A.forEach(u),this.h()},h(){h(l,"class","w30 svelte-1lk3l1m"),h(d,"class","text-right svelte-1lk3l1m")},m(N,A){w(N,e,A),_(e,l),_(l,a),_(l,n),_(e,i),_(e,o),_(o,f),_(e,m),_(e,d),_(d,c),_(d,k),_(e,p)},p(N,A){A[0]&1024&&t!==(t=N[10].geoPerc.length+N[39]-4+"")&&le(a,t),A[0]&1024&&r!==(r=N[37].name+"")&&le(f,r),A[0]&1024&&g!==(g=N[37].value.toFixed(1)+"")&&le(c,g)},d(N){N&&u(e)}}}function Li(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["residents","health"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["residents","health"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function ji(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Fi(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["residents","marital"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["residents","marital"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function qi(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Ri(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["residents","grade"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["residents","grade"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Oi(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Gi(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["residents","economic"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["residents","economic"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Wi(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Hi(s){let e,l,t,a,n,i,o;l=new bs({props:{data:s[10].selected&&s[15](["residents","distance"]),zKey:s[11].all!=s[11].selected?"z":null}});let r=s[11].all!=s[11].selected&&ln();return{c(){e=v("div"),te(l.$$.fragment),t=M(),r&&r.c(),a=M(),n=v("div"),i=K("Excludes home workers and other circumstances"),this.h()},l(f){e=b(f,"DIV",{class:!0,style:!0});var m=y(e);ae(l.$$.fragment,m),m.forEach(u),t=L(f),r&&r.l(f),a=L(f),n=b(f,"DIV",{class:!0});var d=y(n);i=D(d,"Excludes home workers and other circumstances"),d.forEach(u),this.h()},h(){h(e,"class","chart svelte-1lk3l1m"),Y(e,"height","100px"),h(n,"class","text-small muted svelte-1lk3l1m")},m(f,m){w(f,e,m),se(l,e,null),w(f,t,m),r&&r.m(f,m),w(f,a,m),w(f,n,m),_(n,i),o=!0},p(f,m){const d={};m[0]&1024&&(d.data=f[10].selected&&f[15](["residents","distance"])),m[0]&2048&&(d.zKey=f[11].all!=f[11].selected?"z":null),l.$set(d),f[11].all!=f[11].selected?r||(r=ln(),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},i(f){o||(j(l.$$.fragment,f),o=!0)},o(f){q(l.$$.fragment,f),o=!1},d(f){f&&u(e),ne(l),f&&u(t),r&&r.d(f),f&&u(a),f&&u(n)}}}function Ui(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function ln(s){let e,l,t;return{c(){e=v("div"),l=v("li"),t=K(" vs whole population"),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=y(e);l=b(n,"LI",{class:!0}),y(l).forEach(u),t=D(n," vs whole population"),n.forEach(u),this.h()},h(){h(l,"class","line svelte-1lk3l1m"),h(e,"class","text-small muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,l),_(e,t)},d(a){a&&u(e)}}}function Zi(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["residents","travel"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["residents","travel"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Ji(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Xi(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["households","housing"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["households","housing"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function Yi(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function Qi(s){let e,l;return e=new Cl({props:{label:de.comparison,data:s[10].selected&&s[15](["households","tenure"]),zKey:s[11].all!=s[11].selected?"z":null}}),{c(){te(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,a){se(e,t,a),l=!0},p(t,a){const n={};a[0]&1024&&(n.data=t[10].selected&&t[15](["households","tenure"])),a[0]&2048&&(n.zKey=t[11].all!=t[11].selected?"z":null),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function xi(s){let e,l=de.nodata+"",t;return{c(){e=v("span"),t=K(l),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=y(e);t=D(n,l),n.forEach(u),this.h()},h(){h(e,"class","muted svelte-1lk3l1m")},m(a,n){w(a,e,n),_(e,t)},p:H,i:H,o:H,d(a){a&&u(e)}}}function $i(s){let e,l,t,a,n,i,o,r,f,m,d,g,c,k,p=(s[12][0]?s[1][0]?"Select another topic":"Select a topic":"No more topics available")+"",N,A,I,F,R,B,P,x,fe,$,X=s[12],Z=[];for(let S=0;S<X.length;S+=1)Z[S]=qs(Fs(s,X,S));let T=s[4]&&Rs(s),W=s[1][0]&&Gs(s),ie=(s[7]=="failed"||s[8]==!0)&&Hs(s),C=s[10].all&&s[10].selected&&s[11].all&&s[11].selected>=0&&Js(s);return{c(){e=v("h1"),l=K("Key population explorer"),t=M(),a=v("p"),n=K("Select one or more identity characteristics to define a population group to compare with the whole population of England and Wales. For example, see "),i=v("a"),o=K("people of Sikh ethnicity born in the UK"),r=K(" or "),f=v("a"),m=K("people aged 65+ born in Ireland"),d=K("."),g=M(),c=v("select"),k=v("option"),N=K(p);for(let S=0;S<Z.length;S+=1)Z[S].c();I=M(),T&&T.c(),F=M(),W&&W.c(),R=M(),ie&&ie.c(),B=M(),C&&C.c(),P=_e(),this.h()},l(S){e=b(S,"H1",{class:!0});var G=y(e);l=D(G,"Key population explorer"),G.forEach(u),t=L(S),a=b(S,"P",{});var U=y(a);n=D(U,"Select one or more identity characteristics to define a population group to compare with the whole population of England and Wales. For example, see "),i=b(U,"A",{href:!0,class:!0});var me=y(i);o=D(me,"people of Sikh ethnicity born in the UK"),me.forEach(u),r=D(U," or "),f=b(U,"A",{href:!0,class:!0});var ge=y(f);m=D(ge,"people aged 65+ born in Ireland"),ge.forEach(u),d=D(U,"."),U.forEach(u),g=L(S),c=b(S,"SELECT",{class:!0});var V=y(c);k=b(V,"OPTION",{});var ue=y(k);N=D(ue,p),ue.forEach(u);for(let Qe=0;Qe<Z.length;Qe+=1)Z[Qe].l(V);V.forEach(u),I=L(S),T&&T.l(S),F=L(S),W&&W.l(S),R=L(S),ie&&ie.l(S),B=L(S),C&&C.l(S),P=_e(),this.h()},h(){h(e,"class","mtl svelte-1lk3l1m"),h(i,"href","?religion=7&cob=1-5"),h(i,"class","svelte-1lk3l1m"),h(f,"href","?age=65-90&cob=6"),h(f,"class","svelte-1lk3l1m"),k.__value=null,k.value=k.__value,c.disabled=A=!s[12][0],h(c,"class","svelte-1lk3l1m"),s[4]===void 0&&dt(()=>s[24].call(c))},m(S,G){w(S,e,G),_(e,l),w(S,t,G),w(S,a,G),_(a,n),_(a,i),_(i,o),_(a,r),_(a,f),_(f,m),_(a,d),w(S,g,G),w(S,c,G),_(c,k),_(k,N);for(let U=0;U<Z.length;U+=1)Z[U].m(c,null);gt(c,s[4]),w(S,I,G),T&&T.m(S,G),w(S,F,G),W&&W.m(S,G),w(S,R,G),ie&&ie.m(S,G),w(S,B,G),C&&C.m(S,G),w(S,P,G),x=!0,fe||($=kt(c,"change",s[24]),fe=!0)},p(S,G){if((!x||G[0]&4098)&&p!==(p=(S[12][0]?S[1][0]?"Select another topic":"Select a topic":"No more topics available")+"")&&le(N,p),G[0]&4096){X=S[12];let U;for(U=0;U<X.length;U+=1){const me=Fs(S,X,U);Z[U]?Z[U].p(me,G):(Z[U]=qs(me),Z[U].c(),Z[U].m(c,null))}for(;U<Z.length;U+=1)Z[U].d(1);Z.length=X.length}(!x||G[0]&4096&&A!==(A=!S[12][0]))&&(c.disabled=A),G[0]&4112&&gt(c,S[4]),S[4]?T?T.p(S,G):(T=Rs(S),T.c(),T.m(F.parentNode,F)):T&&(T.d(1),T=null),S[1][0]?W?W.p(S,G):(W=Gs(S),W.c(),W.m(R.parentNode,R)):W&&(W.d(1),W=null),S[7]=="failed"||S[8]==!0?ie?ie.p(S,G):(ie=Hs(S),ie.c(),ie.m(B.parentNode,B)):ie&&(ie.d(1),ie=null),S[10].all&&S[10].selected&&S[11].all&&S[11].selected>=0?C?(C.p(S,G),G[0]&3072&&j(C,1)):(C=Js(S),C.c(),j(C,1),C.m(P.parentNode,P)):C&&(ve(),q(C,1,1,()=>{C=null}),be())},i(S){x||(j(C),x=!0)},o(S){q(C),x=!1},d(S){S&&u(e),S&&u(t),S&&u(a),S&&u(g),S&&u(c),Je(Z,S),S&&u(I),T&&T.d(S),S&&u(F),W&&W.d(S),S&&u(R),ie&&ie.d(S),S&&u(B),C&&C.d(S),S&&u(P),fe=!1,$()}}}function eo(s){let e,l,t,a,n,i,o,r,f,m;return f=new jn({props:{column:"wide",$$slots:{default:[$i]},$$scope:{ctx:s}}}),{c(){e=v("meta"),l=v("meta"),t=v("meta"),a=v("meta"),n=v("meta"),i=v("meta"),o=v("meta"),r=M(),te(f.$$.fragment),this.h()},l(d){const g=kn('[data-svelte="svelte-g36dl2"]',document.head);e=b(g,"META",{name:!0,content:!0}),l=b(g,"META",{property:!0,content:!0}),t=b(g,"META",{property:!0,content:!0}),a=b(g,"META",{property:!0,content:!0}),n=b(g,"META",{property:!0,content:!0}),i=b(g,"META",{property:!0,content:!0}),o=b(g,"META",{name:!0,content:!0}),g.forEach(u),r=L(d),ae(f.$$.fragment,d),this.h()},h(){document.title="Census Key Population Explorer",h(e,"name","description"),h(e,"content",""),h(l,"property","og:title"),h(l,"content","Census Key Population Explorer"),h(t,"property","og:type"),h(t,"content","website"),h(a,"property","og:url"),h(a,"content",""+(Cn+"/")),h(n,"property","og:image:type"),h(n,"content","image/jpeg"),h(i,"property","og:description"),h(i,"content",""),h(o,"name","description"),h(o,"content","")},m(d,g){_(document.head,e),_(document.head,l),_(document.head,t),_(document.head,a),_(document.head,n),_(document.head,i),_(document.head,o),w(d,r,g),se(f,d,g),m=!0},p(d,g){const c={};g[0]&8191|g[1]&65536&&(c.$$scope={dirty:g,ctx:d}),f.$set(c)},i(d){m||(j(f.$$.fragment,d),m=!0)},o(d){q(f.$$.fragment,d),m=!1},d(d){u(e),u(l),u(t),u(a),u(n),u(i),u(o),d&&u(r),ne(f,d)}}}const ro=!1;async function fo({fetch:s}){let e=await Tn(lt.url,lt.layer,s),l={};e.features.forEach(g=>l[g.properties[lt.code]]=g.properties[lt.name]);let t=await is(ts,[],s),a=oa(t.data.residents.health.values),n=t.data,i=await os([],s),o=[],f=i.data.dataset.table.dimensions[0].categories.map(g=>g.code.slice(-9)),m=i.data.dataset.table.values,d={};return f.forEach((g,c)=>{d[g]=m[c]}),f.forEach(g=>{o.push({code:g,name:l[g],value:100})}),o.forEach(g=>g.color=ul.seq[4]),{props:{geojson:e,geoLookup:l,sumAll:a,dataAll:n,geoAll:d,geoCodes:f,geoPerc:o}}}let lo="light";const tn=(s,e)=>e.value-s.value,an=s=>s.value!=null,sn=(s,e)=>e.value-s.value;function to(s,e,l){let t,a;ce(s,Nn,O=>l(34,a=O));let{geojson:n,geoLookup:i,sumAll:o,dataAll:r,geoAll:f,geoCodes:m,geoPerc:d}=e;aa("theme",En[lo]);let g,c,k=null,p=null,N={},A=[];na.forEach(O=>{l(5,N[O.label]=O.cats[0],N)});let I=null,F="success",R=!1,B=0,P={all:r,selected:r,geojson:n,geoLookup:i,geoCodes:m,geoAll:f,geoPerc:d,geoBreaks:[0,100]},x={all:o,selected:o};function fe(O){l(1,A=[...A,zl({topic:p.label,key:p.key},N[O])]),us(`?${A.map(J=>`${J.key}=${J.code}`).join("&")}`),l(4,p=null)}function $(O){l(1,A=A.filter(J=>J.topic!=O)),us(`?${A.map(J=>`${J.key}=${J.code}`).join("&")}`)}function X(){l(7,F="loading"),A&&A.map(O=>O.code).includes("0-15")?l(8,R=!0):l(8,R=!1),is(ts,A).then(O=>{O.data.residents.age.values?(l(11,x.selected=oa(O.data.residents.health.values),x),l(10,P.selected=O.data,P),os(A).then(J=>{let re=[],ee=null;if(J.data.dataset.table.dimensions){let ke=J.data.dataset.table.dimensions[0].categories.map(oe=>oe.code.slice(-9)),cl=J.data.dataset.table.values,Xe={};ke.forEach((oe,Ge)=>{Xe[oe]=cl[Ge]}),P.geoCodes.forEach(oe=>{re.push({code:oe,name:P.geoLookup[oe],value:Xe[oe]?Xe[oe]/P.geoAll[oe]*100:null})});let ye=re.map(oe=>oe.value).filter(oe=>oe!=null);ee=ye[4]?pn(ye,5):null}else P.geoCodes.forEach(Q=>{re.push({code:Q,name:P.geoLookup[Q],value:null})});if(ee==null)re.forEach(Q=>Q.color=ul.nodata),l(10,P.geoBreaks=[0,100],P);else if(!ee[1])re.forEach(Q=>Q.color=ul.seq[4]),l(10,P.geoBreaks=[0,100],P);else{let Q=[];ee.forEach(ke=>Q.push(ke[0])),Q.push(ee[ee.length-1][ee[ee.length-1].length-1]),Q[Q.length-1]==Q[Q.length-2]&&Q.pop(),re.forEach(ke=>ke.color=ke.value?Dn(ke.value,Q,ul.seq):ul.nodata),l(10,P.geoBreaks=Q,P)}l(10,P.geoPerc=re,P),l(9,B=A.length),l(7,F="success")})):l(7,F="failed")})}function Z(O){let J=O[0],re=O[1],ee=P.all[J][re].values,Q=P.selected[J][re].values,ke=[],cl=0,Xe=0;return wn[re].forEach(ye=>{let oe=ye.label,Ge=0,Al=0;ye.cells.forEach(hl=>{Ge+=ee[hl],cl+=ee[hl],Al+=Q[hl],Xe+=Q[hl]}),ke.push({x:oe,yVal:Al,zVal:Ge})}),ke.forEach(ye=>{ye.y=ye.yVal/Xe*100,ye.z=ye.zVal/cl*100}),ke}function T(O){let J=O.residents.age.values,re=oa(J),ee=0,Q=0;for(;Q<re/2;)Q+=J[ee],ee+=1;return ee-1}function W(){l(2,c=g<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}In(()=>{console.log("navigated"),l(1,A=[]);for(let O of a.url.searchParams.entries()){let J=na.find(re=>re.key==O[0]);if(J){let re=J.cats.find(ee=>ee.code==O[1]);re&&A.push(zl({topic:J.label,key:J.key},re))}}A[0]?X():(l(10,P.selected=r,P),l(11,x.selected=o,x))});function ie(){p=es(this),l(4,p),l(12,t),l(1,A)}const C=O=>Sn;function S(){N[p.label]=es(this),l(5,N),l(4,p)}const G=()=>fe(p.label),U=O=>$(O.topic);function me(O){I=O,l(6,I)}function ge(O){k=O,l(3,k)}const V=O=>O.code==I,ue=O=>O.code==I;function Qe(){g=this.clientWidth,l(0,g)}return s.$$set=O=>{"geojson"in O&&l(17,n=O.geojson),"geoLookup"in O&&l(18,i=O.geoLookup),"sumAll"in O&&l(19,o=O.sumAll),"dataAll"in O&&l(20,r=O.dataAll),"geoAll"in O&&l(21,f=O.geoAll),"geoCodes"in O&&l(22,m=O.geoCodes),"geoPerc"in O&&l(23,d=O.geoPerc)},s.$$.update=()=>{s.$$.dirty[0]&2&&l(12,t=na.filter(O=>!A.map(J=>J.topic).includes(O.label))),s.$$.dirty[0]&1&&g&&W()},[g,A,c,k,p,N,I,F,R,B,P,x,t,fe,$,Z,T,n,i,o,r,f,m,d,ie,C,S,G,U,me,ge,V,ue,Qe]}class uo extends pe{constructor(e){super();Ee(this,e,to,eo,we,{geojson:17,geoLookup:18,sumAll:19,dataAll:20,geoAll:21,geoCodes:22,geoPerc:23},null,[-1,-1])}}export{uo as default,fo as load,ro as prerender};
